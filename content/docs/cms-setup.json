{
	"title": "Setup",
	"group": "CMS",
	"order": 8.01,
	"body": "In order to add the Plenti CMS to your site you need to use 2 magic variables (<code>content</code>&nbsp;and&nbsp;<code>user</code>)<span style=\"color: var(--base-dark);\">&nbsp;that are provided to you by Plenti.</span><div><br><div>You have a great deal of flexibility in how to implement these on your site. Commonly you will add the admin menu to your entrypoint file in a manner similar to this:</div><div><br></div><div><codeblock>&lt;script&gt;<br>&nbsp; export let content, user;<br>&lt;/script&gt;<br><br>&lt;html lang=\"en\"&gt;<br>&nbsp; &lt;head&gt;&lt;/head&gt;<br>&nbsp; &lt;body&gt;<br>&nbsp; &nbsp; {#if user &amp;&amp; $user.isAuthenticated}<br>&nbsp; &nbsp; &nbsp; &lt;svelte:component this={$user.menu} bind:content {user} /&gt;<br>&nbsp; &nbsp;&nbsp;{/if}<br>&nbsp; &nbsp; &lt;main&gt;<br>&nbsp; &nbsp; &nbsp;&nbsp;&lt;svelte:component this={layout} {...content.fields} {user} /&gt;<br>&nbsp; &nbsp; &lt;/main&gt;<br>&nbsp; &lt;/body&gt;<br>&lt;/html&gt;</codeblock></div></div><div><br></div><div>Then on whatever page or popup you want to use to display the login, you can simply add something like this:</div><div><br><codeblock>&lt;button on:click|preventDefault={$user.login()}&gt;<br>&nbsp; Login<br>&lt;/button&gt;</codeblock></div><div><br></div><div>For logout, there's a link provided to you by default in the admin menu, but you can implement your own workflow using:<br><br><codeblock>&lt;button on:click|preventDefault={$user.logout()}&gt;<br>&nbsp; Logout<br>&lt;/button&gt;</codeblock></div><div><div><br></div><div>The information above is enough to get you up and running locally. If you make changes through the admin interface, it will update your JSON locally, which you can then commit or discard with Git.<br></div><h2>Remote / Deployed CMS</h2></div><div>If you want to use the CMS on a deployed website, or hand it off to clients who don't use Git, you can configure a remote repository in your sitewide <code>plenti.json</code> configuration file:</div><div><br></div><div><codeblock>{<br>&nbsp; \"cms\": {<br>&nbsp;&nbsp;&nbsp; \"repo\": \"https://gitlab.com/my-org/my-repo\",<br>&nbsp;&nbsp;&nbsp; \"redirect_url\": \"https://my-site.com\",<br>&nbsp;&nbsp;&nbsp; \"app_id\": \"put oauth id here\",<br>&nbsp;&nbsp;&nbsp; \"branch\": \"main\"<br>&nbsp; }<br>}<br></codeblock></div>"
}