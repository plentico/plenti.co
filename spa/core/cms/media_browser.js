import{SvelteComponent,add_flush_callback,append_hydration,attr,bind,binding_callbacks,check_outros,children,claim_component,claim_element,claim_space,create_component,destroy_component,detach,element,empty,group_outros,init,insert_hydration,mount_component,safe_not_equal,space,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import MediaFilters from"./media_filters.js";import MediaGrid from"./media_grid.js";import ButtonWrapper from"./button_wrapper.js";import Button from"./button.js";function create_if_block(e){let t,n;return t=new ButtonWrapper({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,s){mount_component(t,e,s),n=!0},p(e,n){const s={};n&524352&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){if(n)return;transition_in(t.$$.fragment,e),n=!0},o(e){transition_out(t.$$.fragment,e),n=!1},d(e){destroy_component(t,e)}}}function create_default_slot(e){let n,s,t,i,o;n=new Button({props:{buttonText:"Download selected"}}),n.$on("click",e[8]);function r(t){e[18](t)}let a={afterSubmit:e[9],buttonText:"Delete Selected Media",buttonStyle:"secondary",action:"delete",encoding:"text"};return e[6]!==void 0&&(a.commitList=e[6]),t=new Button({props:a}),binding_callbacks.push(()=>bind(t,"commitList",r)),{c(){create_component(n.$$.fragment),s=space(),create_component(t.$$.fragment)},l(e){claim_component(n.$$.fragment,e),s=claim_space(e),claim_component(t.$$.fragment,e)},m(e,i){mount_component(n,e,i),insert_hydration(e,s,i),mount_component(t,e,i),o=!0},p(e,n){const s={};!i&&n&64&&(i=!0,s.commitList=e[6],add_flush_callback(()=>i=!1)),t.$set(s)},i(e){if(o)return;transition_in(n.$$.fragment,e),transition_in(t.$$.fragment,e),o=!0},o(e){transition_out(n.$$.fragment,e),transition_out(t.$$.fragment,e),o=!1},d(e){destroy_component(n,e),e&&detach(s),destroy_component(t,e)}}}function create_fragment(e){let o,n,f,u,b,g,p,m,s,d,v,h,c,a,r;function E(t){e[10](t)}function C(t){e[11](t)}function _(t){e[12](t)}function j(t){e[13](t)}function y(t){e[14](t)}let i={};e[0]!==void 0&&(i.media=e[0]),e[4]!==void 0&&(i.filters=e[4]),e[5]!==void 0&&(i.enabledFilters=e[5]),e[7]!==void 0&&(i.filteredMedia=e[7]),e[1]!==void 0&&(i.changingMedia=e[1]),n=new MediaFilters({props:i}),binding_callbacks.push(()=>bind(n,"media",E)),binding_callbacks.push(()=>bind(n,"filters",C)),binding_callbacks.push(()=>bind(n,"enabledFilters",_)),binding_callbacks.push(()=>bind(n,"filteredMedia",j)),binding_callbacks.push(()=>bind(n,"changingMedia",y));function w(t){e[15](t)}function O(t){e[16](t)}function x(t){e[17](t)}let l={files:e[7]};e[3]!==void 0&&(l.selectedMedia=e[3]),e[1]!==void 0&&(l.changingMedia=e[1]),e[2]!==void 0&&(l.showMediaModal=e[2]),s=new MediaGrid({props:l}),binding_callbacks.push(()=>bind(s,"selectedMedia",w)),binding_callbacks.push(()=>bind(s,"changingMedia",O)),binding_callbacks.push(()=>bind(s,"showMediaModal",x));let t=e[3].length>0&&create_if_block(e);return{c(){o=element("div"),create_component(n.$$.fragment),m=space(),create_component(s.$$.fragment),c=space(),t&&t.c(),a=empty(),this.h()},l(e){o=claim_element(e,"DIV",{class:!0});var i=children(o);claim_component(n.$$.fragment,i),m=claim_space(i),claim_component(s.$$.fragment,i),i.forEach(detach),c=claim_space(e),t&&t.l(e),a=empty(),this.h()},h(){attr(o,"class","media-wrapper svelte-1tdkqce")},m(e,i){insert_hydration(e,o,i),mount_component(n,o,null),append_hydration(o,m),mount_component(s,o,null),insert_hydration(e,c,i),t&&t.m(e,i),insert_hydration(e,a,i),r=!0},p(e,[o]){const i={};!f&&o&1&&(f=!0,i.media=e[0],add_flush_callback(()=>f=!1)),!u&&o&16&&(u=!0,i.filters=e[4],add_flush_callback(()=>u=!1)),!b&&o&32&&(b=!0,i.enabledFilters=e[5],add_flush_callback(()=>b=!1)),!g&&o&128&&(g=!0,i.filteredMedia=e[7],add_flush_callback(()=>g=!1)),!p&&o&2&&(p=!0,i.changingMedia=e[1],add_flush_callback(()=>p=!1)),n.$set(i);const r={};o&128&&(r.files=e[7]),!d&&o&8&&(d=!0,r.selectedMedia=e[3],add_flush_callback(()=>d=!1)),!v&&o&2&&(v=!0,r.changingMedia=e[1],add_flush_callback(()=>v=!1)),!h&&o&4&&(h=!0,r.showMediaModal=e[2],add_flush_callback(()=>h=!1)),s.$set(r),e[3].length>0?t?(t.p(e,o),o&8&&transition_in(t,1)):(t=create_if_block(e),t.c(),transition_in(t,1),t.m(a.parentNode,a)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(e){if(r)return;transition_in(n.$$.fragment,e),transition_in(s.$$.fragment,e),transition_in(t),r=!0},o(e){transition_out(n.$$.fragment,e),transition_out(s.$$.fragment,e),transition_out(t),r=!1},d(e){e&&detach(o),destroy_component(n),destroy_component(s),e&&detach(c),t&&t.d(e),e&&detach(a)}}}function instance(e,t,n){let a,c,{media:o,changingMedia:i,showMediaModal:r}=t,l=[],d=[],s=[];const h=()=>{s.forEach(e=>{const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",e.substring(e.lastIndexOf("/")+1)),t.click()})},u=()=>{s.forEach(e=>{n(0,o=o.filter(t=>t!=e))}),n(3,s=[])};function m(e){o=e,n(0,o)}function f(e){l=e,n(4,l)}function p(e){d=e,n(5,d)}function g(e){a=e,n(7,a)}function v(e){i=e,n(1,i)}function b(e){s=e,n(3,s)}function j(e){i=e,n(1,i)}function y(e){r=e,n(2,r)}function _(e){c=e,(n(6,c),n(3,s))}e.$$set=e=>{"media"in e&&n(0,o=e.media),"changingMedia"in e&&n(1,i=e.changingMedia),"showMediaModal"in e&&n(2,r=e.showMediaModal)},e.$$.update=()=>{if(e.$$.dirty&8)$:n(6,c=s.map(e=>({file:e,contents:null})))};$:n(7,a=[]);return[o,i,r,s,l,d,c,a,h,u,m,f,p,g,v,b,j,y,_]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{media:0,changingMedia:1,showMediaModal:2})}}export default Component