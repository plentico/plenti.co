import{SvelteComponent,append_hydration,attr,children,claim_element,claim_space,claim_svg_element,claim_text,destroy_each,detach,element,init,insert_hydration,is_function,listen,noop,safe_not_equal,set_data,space,src_url_equal,svg_element,text}from"../../web_modules/svelte/internal/index.mjs";import{onMount}from"../../web_modules/svelte/index.mjs";import{isImage,isDoc}from"./media_checker.js";function get_each_context(e,t,n){const s=e.slice();return s[5]=t[n],s}function create_if_block_2(e){let t,n;return{c(){t=element("img"),this.h()},l(e){t=claim_element(e,"IMG",{src:!0,class:!0}),this.h()},h(){src_url_equal(t.src,n=e[5])||attr(t,"src",n),attr(t,"class","svelte-l4dsqj")},m(e,n){insert_hydration(e,t,n)},p(e,s){s&2&&!src_url_equal(t.src,n=e[5])&&attr(t,"src",n)},d(e){e&&detach(t)}}}function create_if_block_1(e){let t,n;return{c(){t=element("embed"),this.h()},l(e){t=claim_element(e,"EMBED",{src:!0,type:!0,class:!0}),this.h()},h(){src_url_equal(t.src,n=e[5])||attr(t,"src",n),attr(t,"type","application/pdf"),attr(t,"class","svelte-l4dsqj")},m(e,n){insert_hydration(e,t,n)},p(e,s){s&2&&!src_url_equal(t.src,n=e[5])&&attr(t,"src",n)},d(e){e&&detach(t)}}}function create_if_block(){let t,n,s;return{c(){t=svg_element("svg"),n=svg_element("path"),s=svg_element("path"),this.h()},l(e){t=claim_svg_element(e,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var o=children(t);n=claim_svg_element(o,"path",{stroke:!0,d:!0,fill:!0}),children(n).forEach(detach),s=claim_svg_element(o,"path",{d:!0}),children(s).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"stroke","none"),attr(n,"d","M0 0h24v24H0z"),attr(n,"fill","none"),attr(s,"d","M5 12l5 5l10 -10"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"class","icon icon-tabler icon-tabler-check svelte-l4dsqj"),attr(t,"width","65"),attr(t,"height","65"),attr(t,"viewBox","0 0 24 24"),attr(t,"stroke-width","2.5"),attr(t,"stroke","#1c7fc7"),attr(t,"fill","none"),attr(t,"stroke-linecap","round"),attr(t,"stroke-linejoin","round")},m(e,o){insert_hydration(e,t,o),append_hydration(t,n),append_hydration(t,s)},d(e){e&&detach(t)}}}function create_each_block(e){let t,c,l,h,i,a=e[5].split("/").pop()+"",r,f,p=e[0].includes(e[5]),d,u,m,g;function v(e,t){if(t&2&&(c=null),t&2&&(l=null),c==null&&(c=!!isDoc(e[5])),c)return create_if_block_1;if(l==null&&(l=!!isImage(e[5])),l)return create_if_block_2}let o=v(e,-1),n=o&&o(e),s=p&&create_if_block(e);return{c(){t=element("div"),n&&n.c(),h=space(),i=element("div"),r=text(a),f=space(),s&&s.c(),d=space(),this.h()},l(e){t=claim_element(e,"DIV",{class:!0});var c,o=children(t);n&&n.l(o),h=claim_space(o),i=claim_element(o,"DIV",{class:!0}),c=children(i),r=claim_text(c,a),c.forEach(detach),f=claim_space(o),s&&s.l(o),d=claim_space(o),o.forEach(detach),this.h()},h(){attr(i,"class","filename svelte-l4dsqj"),attr(t,"class",u="media"+(e[0].includes(e[5])?" selected":"")+" svelte-l4dsqj")},m(o,a){insert_hydration(o,t,a),n&&n.m(t,null),append_hydration(t,h),append_hydration(t,i),append_hydration(i,r),append_hydration(t,f),s&&s.m(t,null),append_hydration(t,d),m||(g=listen(t,"click",function(){is_function(e[2](e[5]))&&e[2](e[5]).apply(this,arguments)}),m=!0)},p(i,c){e=i,o===(o=v(e,c))&&n?n.p(e,c):(n&&n.d(1),n=o&&o(e),n&&(n.c(),n.m(t,h))),c&2&&a!==(a=e[5].split("/").pop()+"")&&set_data(r,a),c&3&&(p=e[0].includes(e[5])),p?s||(s=create_if_block(e),s.c(),s.m(t,d)):s&&(s.d(1),s=null),c&3&&u!==(u="media"+(e[0].includes(e[5])?" selected":"")+" svelte-l4dsqj")&&attr(t,"class",u)},d(e){e&&detach(t),n&&n.d(),s&&s.d(),m=!1,g()}}}function create_fragment(e){let n,s=e[1],t=[];for(let n=0;n<s.length;n+=1)t[n]=create_each_block(get_each_context(e,s,n));return{c(){n=element("div");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){n=claim_element(e,"DIV",{class:!0});var s=children(n);for(let e=0;e<t.length;e+=1)t[e].l(s);s.forEach(detach),this.h()},h(){attr(n,"class","media-grid svelte-l4dsqj")},m(e,s){insert_hydration(e,n,s);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(n,null)},p(e,[o]){if(o&7){s=e[1];let i;for(i=0;i<s.length;i+=1){const a=get_each_context(e,s,i);t[i]?t[i].p(a,o):(t[i]=create_each_block(a),t[i].c(),t[i].m(n,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},i:noop,o:noop,d(e){e&&detach(n),destroy_each(t,e)}}}function instance(e,t,n){let{files:a,changingMedia:o,showMediaModal:i}=t,{selectedMedia:s=[]}=t;onMount(async()=>{focus(),window.addEventListener("blur",()=>{let e=document.querySelectorAll("embed");e.forEach(e=>{document.activeElement===e&&r(e.attributes.src.nodeValue)}),window.parent.focus()})});const r=e=>{o!==""&&(n(3,o=e),n(4,i=!1)),s.includes(e)?n(0,s=s.filter(t=>t!==e)):n(0,s=[...s,e])};return e.$$set=e=>{"files"in e&&n(1,a=e.files),"changingMedia"in e&&n(3,o=e.changingMedia),"showMediaModal"in e&&n(4,i=e.showMediaModal),"selectedMedia"in e&&n(0,s=e.selectedMedia)},[s,a,r,o,i]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{files:1,changingMedia:3,showMediaModal:4,selectedMedia:0})}}export default Component