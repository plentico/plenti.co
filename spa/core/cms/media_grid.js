import{SvelteComponent,append_hydration,attr,children,claim_element,claim_space,claim_svg_element,claim_text,destroy_each,detach,element,init,insert_hydration,is_function,listen,noop,prevent_default,run_all,safe_not_equal,set_data,space,src_url_equal,stop_propagation,svg_element,text}from"../../web_modules/svelte/internal/index.mjs";import{onMount}from"../../web_modules/svelte/index.mjs";import{isImage,isDoc}from"./media_checker.js";function get_each_context(e,t,n){const s=e.slice();return s[8]=t[n],s[10]=n,s}function create_if_block_3(e){let t,n;return{c(){t=element("img"),this.h()},l(e){t=claim_element(e,"IMG",{src:!0,class:!0}),this.h()},h(){src_url_equal(t.src,n=e[8])||attr(t,"src",n),attr(t,"class","svelte-oqwrby")},m(e,n){insert_hydration(e,t,n)},p(e,s){s&2&&!src_url_equal(t.src,n=e[8])&&attr(t,"src",n)},d(e){e&&detach(t)}}}function create_if_block_2(e){let t,n;return{c(){t=element("embed"),this.h()},l(e){t=claim_element(e,"EMBED",{src:!0,type:!0,class:!0}),this.h()},h(){src_url_equal(t.src,n=e[8])||attr(t,"src",n),attr(t,"type","application/pdf"),attr(t,"class","svelte-oqwrby")},m(e,n){insert_hydration(e,t,n)},p(e,s){s&2&&!src_url_equal(t.src,n=e[8])&&attr(t,"src",n)},d(e){e&&detach(t)}}}function create_else_block(){let t,n,s,o,i;return{c(){t=svg_element("svg"),n=svg_element("path"),s=svg_element("path"),o=svg_element("path"),i=svg_element("path"),this.h()},l(e){t=claim_svg_element(e,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=children(t);n=claim_svg_element(a,"path",{stroke:!0,d:!0,fill:!0}),children(n).forEach(detach),s=claim_svg_element(a,"path",{d:!0}),children(s).forEach(detach),o=claim_svg_element(a,"path",{d:!0}),children(o).forEach(detach),i=claim_svg_element(a,"path",{d:!0}),children(i).forEach(detach),a.forEach(detach),this.h()},h(){attr(n,"stroke","none"),attr(n,"d","M0 0h24v24H0z"),attr(n,"fill","none"),attr(s,"d","M9 15l6 -6"),attr(o,"d","M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"),attr(i,"d","M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"width","24"),attr(t,"height","24"),attr(t,"viewBox","0 0 24 24"),attr(t,"fill","none"),attr(t,"stroke","currentColor"),attr(t,"stroke-width","2"),attr(t,"stroke-linecap","round"),attr(t,"stroke-linejoin","round"),attr(t,"class","icon icon-tabler icons-tabler-outline icon-tabler-link")},m(e,a){insert_hydration(e,t,a),append_hydration(t,n),append_hydration(t,s),append_hydration(t,o),append_hydration(t,i)},d(e){e&&detach(t)}}}function create_if_block_1(){let t,n,s;return{c(){t=svg_element("svg"),n=svg_element("path"),s=svg_element("path"),this.h()},l(e){t=claim_svg_element(e,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=children(t);n=claim_svg_element(o,"path",{stroke:!0,d:!0,fill:!0}),children(n).forEach(detach),s=claim_svg_element(o,"path",{d:!0}),children(s).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"stroke","none"),attr(n,"d","M0 0h24v24H0z"),attr(n,"fill","none"),attr(s,"d","M5 12l5 5l10 -10"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"width","24"),attr(t,"height","24"),attr(t,"viewBox","0 0 24 24"),attr(t,"fill","none"),attr(t,"stroke","currentColor"),attr(t,"stroke-width","2"),attr(t,"stroke-linecap","round"),attr(t,"stroke-linejoin","round"),attr(t,"class","icon icon-tabler icons-tabler-outline icon-tabler-checked")},m(e,o){insert_hydration(e,t,o),append_hydration(t,n),append_hydration(t,s)},d(e){e&&detach(t)}}}function create_if_block(){let t,n,s;return{c(){t=svg_element("svg"),n=svg_element("path"),s=svg_element("path"),this.h()},l(e){t=claim_svg_element(e,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0});var o=children(t);n=claim_svg_element(o,"path",{stroke:!0,d:!0,fill:!0}),children(n).forEach(detach),s=claim_svg_element(o,"path",{d:!0}),children(s).forEach(detach),o.forEach(detach),this.h()},h(){attr(n,"stroke","none"),attr(n,"d","M0 0h24v24H0z"),attr(n,"fill","none"),attr(s,"d","M5 12l5 5l10 -10"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"class","icon icon-tabler icon-tabler-check svelte-oqwrby"),attr(t,"width","65"),attr(t,"height","65"),attr(t,"viewBox","0 0 24 24"),attr(t,"stroke-width","2.5"),attr(t,"stroke","#1c7fc7"),attr(t,"fill","none"),attr(t,"stroke-linecap","round"),attr(t,"stroke-linejoin","round")},m(e,o){insert_hydration(e,t,o),append_hydration(t,n),append_hydration(t,s)},d(e){e&&detach(t)}}}function create_each_block(e){let t,p,u,l,r,c=e[8].split("/").pop()+"",d,j,o,b,g=e[0].includes(e[8]),h,m,v,_;function y(e,t){if(t&2&&(p=null),t&2&&(u=null),p==null&&(p=!!isDoc(e[8])),p)return create_if_block_2;if(u==null&&(u=!!isImage(e[8])),u)return create_if_block_3}let a=y(e,-1),n=a&&a(e);function w(e){return e[2][e[10]]?create_if_block_1:create_else_block}let f=w(e,-1),i=f(e);function O(){return e[7](e[8],e[10])}let s=g&&create_if_block(e);return{c(){t=element("div"),n&&n.c(),l=space(),r=element("div"),d=text(c),j=space(),o=element("button"),i.c(),b=space(),s&&s.c(),h=space(),this.h()},l(e){t=claim_element(e,"DIV",{class:!0});var u,m,a=children(t);n&&n.l(a),l=claim_space(a),r=claim_element(a,"DIV",{class:!0}),u=children(r),d=claim_text(u,c),u.forEach(detach),j=claim_space(a),o=claim_element(a,"BUTTON",{type:!0,class:!0}),m=children(o),i.l(m),m.forEach(detach),b=claim_space(a),s&&s.l(a),h=claim_space(a),a.forEach(detach),this.h()},h(){attr(r,"class","filename svelte-oqwrby"),attr(o,"type","button"),attr(o,"class","copy svelte-oqwrby"),attr(t,"class",m="media"+(e[0].includes(e[8])?" selected":"")+" svelte-oqwrby")},m(a,c){insert_hydration(a,t,c),n&&n.m(t,null),append_hydration(t,l),append_hydration(t,r),append_hydration(r,d),append_hydration(t,j),append_hydration(t,o),i.m(o,null),append_hydration(t,b),s&&s.m(t,null),append_hydration(t,h),v||(_=[listen(o,"click",stop_propagation(prevent_default(O))),listen(t,"click",function(){is_function(e[3](e[8]))&&e[3](e[8]).apply(this,arguments)})],v=!0)},p(r,u){e=r,a===(a=y(e,u))&&n?n.p(e,u):(n&&n.d(1),n=a&&a(e),n&&(n.c(),n.m(t,l))),u&2&&c!==(c=e[8].split("/").pop()+"")&&set_data(d,c),f!==(f=w(e,u))&&(i.d(1),i=f(e),i&&(i.c(),i.m(o,null))),u&3&&(g=e[0].includes(e[8])),g?s||(s=create_if_block(e),s.c(),s.m(t,h)):s&&(s.d(1),s=null),u&3&&m!==(m="media"+(e[0].includes(e[8])?" selected":"")+" svelte-oqwrby")&&attr(t,"class",m)},d(e){e&&detach(t),n&&n.d(),i.d(),s&&s.d(),v=!1,run_all(_)}}}function create_fragment(e){let n,s=e[1],t=[];for(let n=0;n<s.length;n+=1)t[n]=create_each_block(get_each_context(e,s,n));return{c(){n=element("div");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){n=claim_element(e,"DIV",{class:!0});var s=children(n);for(let e=0;e<t.length;e+=1)t[e].l(s);s.forEach(detach),this.h()},h(){attr(n,"class","media-grid svelte-oqwrby")},m(e,s){insert_hydration(e,n,s);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(n,null)},p(e,[o]){if(o&31){s=e[1];let i;for(i=0;i<s.length;i+=1){const a=get_each_context(e,s,i);t[i]?t[i].p(a,o):(t[i]=create_each_block(a),t[i].c(),t[i].m(n,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},i:noop,o:noop,d(e){e&&detach(n),destroy_each(t,e)}}}function instance(e,t,n){let{files:a,changingMedia:i,showMediaModal:r}=t,{selectedMedia:s=[]}=t;onMount(async()=>{focus(),window.addEventListener("blur",()=>{let e=document.querySelectorAll("embed");e.forEach(e=>{document.activeElement===e&&c(e.attributes.src.nodeValue)}),window.parent.focus()})});const c=e=>{i!==""&&(n(5,i=e),n(6,r=!1)),s.includes(e)?n(0,s=s.filter(t=>t!==e)):n(0,s=[...s,e])};let o=a.map(()=>!1);const l=async(e,t)=>{n(2,o[t]=!0,o),await navigator.clipboard.writeText(e??""),setTimeout(()=>{n(2,o[t]=!1,o)},1e3)},d=(e,t)=>l(e,t);return e.$$set=e=>{"files"in e&&n(1,a=e.files),"changingMedia"in e&&n(5,i=e.changingMedia),"showMediaModal"in e&&n(6,r=e.showMediaModal),"selectedMedia"in e&&n(0,s=e.selectedMedia)},[s,a,o,c,l,i,r,d]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{files:1,changingMedia:5,showMediaModal:6,selectedMedia:0})}}export default Component