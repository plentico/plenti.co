import{SvelteComponent,append_hydration,attr,children,claim_element,claim_space,claim_svg_element,claim_text,destroy_each,detach,element,init,insert_hydration,listen,noop,safe_not_equal,set_data,set_input_value,space,svg_element,text}from"../../web_modules/svelte/internal/index.mjs";import{isMediaPath}from"./media_checker.js";function get_each_context(e,t,n){const s=e.slice();return s[16]=t[n],s}function get_each_context_1(e,t,n){const s=e.slice();return s[19]=t[n],s}function create_each_block_1(e){let t,n=e[19]+"",s,o,i,a;function r(){return e[11](e[19],e[16])}return{c(){t=element("button"),s=text(n),this.h()},l(e){t=claim_element(e,"BUTTON",{class:!0});var o=children(t);s=claim_text(o,n),o.forEach(detach),this.h()},h(){attr(t,"class",o="filter"+(e[4](e[0],e[3](e[19],e[16]))?" active":"")+" svelte-c62qib")},m(e,n){insert_hydration(e,t,n),append_hydration(t,s),i||(a=listen(t,"click",r),i=!0)},p(i,a){e=i,a&2&&n!==(n=e[19]+"")&&set_data(s,n),a&3&&o!==(o="filter"+(e[4](e[0],e[3](e[19],e[16]))?" active":"")+" svelte-c62qib")&&attr(t,"class",o)},d(e){e&&detach(t),i=!1,a()}}}function create_each_block(e){let n,o,s=e[16],t=[];for(let n=0;n<s.length;n+=1)t[n]=create_each_block_1(get_each_context_1(e,s,n));return{c(){n=element("div");for(let e=0;e<t.length;e+=1)t[e].c();o=space(),this.h()},l(e){n=claim_element(e,"DIV",{class:!0});var s=children(n);for(let e=0;e<t.length;e+=1)t[e].l(s);o=claim_space(s),s.forEach(detach),this.h()},h(){attr(n,"class","filter-group svelte-c62qib")},m(e,s){insert_hydration(e,n,s);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(n,null);append_hydration(n,o)},p(e,i){if(i&59){s=e[16];let a;for(a=0;a<s.length;a+=1){const r=get_each_context_1(e,s,a);t[a]?t[a].p(r,i):(t[a]=create_each_block_1(r),t[a].c(),t[a].m(n,o))}for(;a<t.length;a+=1)t[a].d(1);t.length=s.length}},d(e){e&&detach(n),destroy_each(t,e)}}}function create_if_block(e){let n,t,i,s,o,a,r;return{c(){n=element("button"),t=svg_element("svg"),i=svg_element("path"),s=svg_element("line"),o=svg_element("line"),this.h()},l(e){n=claim_element(e,"BUTTON",{class:!0});var a,r=children(n);t=claim_svg_element(r,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0}),a=children(t),i=claim_svg_element(a,"path",{stroke:!0,d:!0,fill:!0}),children(i).forEach(detach),s=claim_svg_element(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),children(s).forEach(detach),o=claim_svg_element(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),children(o).forEach(detach),a.forEach(detach),r.forEach(detach),this.h()},h(){attr(i,"stroke","none"),attr(i,"d","M0 0h24v24H0z"),attr(i,"fill","none"),attr(s,"x1","18"),attr(s,"y1","6"),attr(s,"x2","6"),attr(s,"y2","18"),attr(o,"x1","6"),attr(o,"y1","6"),attr(o,"x2","18"),attr(o,"y2","18"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"class","icon icon-tabler icon-tabler-x"),attr(t,"width","20"),attr(t,"height","20"),attr(t,"viewBox","5 5 14 14"),attr(t,"stroke-width","1.5"),attr(t,"stroke","#2c3e50"),attr(t,"fill","none"),attr(t,"stroke-linecap","round"),attr(t,"stroke-linejoin","round"),attr(n,"class","close svelte-c62qib")},m(c,l){insert_hydration(c,n,l),append_hydration(n,t),append_hydration(t,i),append_hydration(t,s),append_hydration(t,o),a||(r=listen(n,"click",e[6]),a=!0)},p:noop,d(e){e&&detach(n),a=!1,r()}}}function create_fragment(e){let o,i,l,c,a,s,d,u,r=e[1],t=[];for(let n=0;n<r.length;n+=1)t[n]=create_each_block(get_each_context(e,r,n));let n=e[0].length>0&&create_if_block(e);return{c(){o=element("div"),i=element("div");for(let e=0;e<t.length;e+=1)t[e].c();l=space(),n&&n.c(),c=space(),a=element("div"),s=element("input"),this.h()},l(e){o=claim_element(e,"DIV",{class:!0});var d,u,r=children(o);i=claim_element(r,"DIV",{class:!0}),d=children(i);for(let e=0;e<t.length;e+=1)t[e].l(d);d.forEach(detach),l=claim_space(r),n&&n.l(r),r.forEach(detach),c=claim_space(e),a=claim_element(e,"DIV",{class:!0}),u=children(a),s=claim_element(u,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),u.forEach(detach),this.h()},h(){attr(i,"class","filters svelte-c62qib"),attr(o,"class","filters-wrapper svelte-c62qib"),attr(s,"id","plenti-media-search"),attr(s,"type","text"),attr(s,"placeholder","Search"),attr(s,"class","svelte-c62qib"),attr(a,"class","plenti-media-search-wrapper")},m(r,h){insert_hydration(r,o,h),append_hydration(o,i);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(i,null);append_hydration(o,l),n&&n.m(o,null),insert_hydration(r,c,h),insert_hydration(r,a,h),append_hydration(a,s),set_input_value(s,e[2]),d||(u=listen(s,"input",e[12]),d=!0)},p(e,[a]){if(a&59){r=e[1];let n;for(n=0;n<r.length;n+=1){const s=get_each_context(e,r,n);t[n]?t[n].p(s,a):(t[n]=create_each_block(s),t[n].c(),t[n].m(i,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}e[0].length>0?n?n.p(e,a):(n=create_if_block(e),n.c(),n.m(o,null)):n&&(n.d(1),n=null),a&4&&s.value!==e[2]&&set_input_value(s,e[2])},i:noop,o:noop,d(e){e&&detach(o),destroy_each(t,e),n&&n.d(),e&&detach(c),e&&detach(a),d=!1,u()}}}function instance(e,t,n){let{media:r,changingMedia:a}=t,{filters:o=[]}=t,{enabledFilters:s=[]}=t,{filteredMedia:u=[]}=t,{singleSelect:l=!1}=t,i="";const d=e=>{let t=e.split("/"),n=t.findIndex(e=>e==="media")+1;return t.slice(n,-1)},p=(e,t)=>t.findIndex(t=>e.join("").includes(t.join("")));for(const e of r)if(isMediaPath(e)){let t=d(e);if(t.length>0){let e=p(t,o);e===-1?o=[...o,t]:o[e]=t}}const g=(e,t)=>t.find(t=>e.join("")===t.join("")),h=(e,t)=>{let n=t.findIndex(t=>t===e),s=t.slice(0,n+1);return s},m=(e,t)=>e.find(e=>e.join("")===t.join("")),c=e=>{l&&f(),m(s,e)?n(0,s=s.filter(t=>t.join("")!==e.join(""))):n(0,s=[...s,e])},f=()=>{n(0,s=[])};a&&c(d(a));const v=(e,t)=>c(h(e,t));function b(){i=this.value,n(2,i)}return e.$$set=e=>{"media"in e&&n(8,r=e.media),"changingMedia"in e&&n(9,a=e.changingMedia),"filters"in e&&n(1,o=e.filters),"enabledFilters"in e&&n(0,s=e.enabledFilters),"filteredMedia"in e&&n(7,u=e.filteredMedia),"singleSelect"in e&&n(10,l=e.singleSelect)},e.$$.update=()=>{if(e.$$.dirty&261)$:n(7,u=r.filter(e=>{const t=!s.length||g(d(e),s),n=!i||e.toLowerCase().includes(i.toLowerCase());return t&&n}))},[s,o,i,h,m,c,f,u,r,a,l,v,b]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{media:8,changingMedia:9,filters:1,enabledFilters:0,filteredMedia:7,singleSelect:10})}}export default Component