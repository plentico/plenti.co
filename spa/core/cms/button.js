import{SvelteComponent,append_hydration,attr,bubble,children,claim_element,claim_space,claim_text,destroy_each,detach,element,empty,init,insert_hydration,listen,noop,prevent_default,run_all,safe_not_equal,set_data,space,text}from"../../web_modules/svelte/internal/index.mjs";import{publish}from"./publish.js";import{postLocal}from"./post_local.js";import{env}from"../../generated/env.js";import{findFileReferences}from"./file_references.js";function get_each_context(e,t,n){const s=e.slice();return s[16]=t[n],s}function get_each_context_1(e,t,n){const s=e.slice();return s[19]=t[n],s[21]=n,s}function create_if_block_4(e){let n,c,g,a,d,p,l,s,i,h,u,o,m,f,v,r=e[0],t=[];for(let n=0;n<r.length;n+=1)t[n]=create_each_block(get_each_context(e,r,n));return{c(){n=element("div"),c=element("div"),g=space(),a=element("div"),d=text("Are you sure you want to permanently remove:"),p=space();for(let e=0;e<t.length;e+=1)t[e].c();l=space(),s=element("div"),i=element("button"),h=text("Yes"),u=space(),o=element("button"),m=text("Cancel"),this.h()},l(e){n=claim_element(e,"DIV",{class:!0});var f,v,b,j,r=children(n);c=claim_element(r,"DIV",{class:!0}),children(c).forEach(detach),g=claim_space(r),a=claim_element(r,"DIV",{class:!0}),v=children(a),d=claim_text(v,"Are you sure you want to permanently remove:"),v.forEach(detach),p=claim_space(r);for(let e=0;e<t.length;e+=1)t[e].l(r);l=claim_space(r),s=claim_element(r,"DIV",{class:!0}),f=children(s),i=claim_element(f,"BUTTON",{class:!0}),b=children(i),h=claim_text(b,"Yes"),b.forEach(detach),u=claim_space(f),o=claim_element(f,"BUTTON",{class:!0}),j=children(o),m=claim_text(j,"Cancel"),j.forEach(detach),f.forEach(detach),r.forEach(detach),this.h()},h(){attr(c,"class","carrot svelte-jo9rpw"),attr(a,"class","warning svelte-jo9rpw"),attr(i,"class","primary svelte-jo9rpw"),attr(o,"class","secondary svelte-jo9rpw"),attr(s,"class","confirm-actions svelte-jo9rpw"),attr(n,"class","confirm svelte-jo9rpw")},m(r,b){insert_hydration(r,n,b),append_hydration(n,c),append_hydration(n,g),append_hydration(n,a),append_hydration(a,d),append_hydration(n,p);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(n,null);append_hydration(n,l),append_hydration(n,s),append_hydration(s,i),append_hydration(i,h),append_hydration(s,u),append_hydration(s,o),append_hydration(o,m),f||(v=[listen(i,"click",prevent_default(e[6])),listen(o,"click",prevent_default(e[12]))],f=!0)},p(e,s){if(s&1){r=e[0];let o;for(o=0;o<r.length;o+=1){const i=get_each_context(e,r,o);t[o]?t[o].p(i,s):(t[o]=create_each_block(i),t[o].c(),t[o].m(n,l))}for(;o<t.length;o+=1)t[o].d(1);t.length=r.length}},d(e){e&&detach(n),destroy_each(t,e),f=!1,run_all(v)}}}function create_if_block_5(e){let n,a,i,s,o=findFileReferences(e[16].file),t=[];for(let n=0;n<o.length;n+=1)t[n]=create_each_block_1(get_each_context_1(e,o,n));return{c(){n=element("div"),a=text("This file is being used on:"),i=space();for(let e=0;e<t.length;e+=1)t[e].c();s=empty(),this.h()},l(e){n=claim_element(e,"DIV",{class:!0});var o=children(n);a=claim_text(o,"This file is being used on:"),o.forEach(detach),i=claim_space(e);for(let n=0;n<t.length;n+=1)t[n].l(e);s=empty(),this.h()},h(){attr(n,"class","file-reference svelte-jo9rpw")},m(e,o){insert_hydration(e,n,o),append_hydration(n,a),insert_hydration(e,i,o);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,o);insert_hydration(e,s,o)},p(e,n){if(n&1){o=findFileReferences(e[16].file);let i;for(i=0;i<o.length;i+=1){const a=get_each_context_1(e,o,i);t[i]?t[i].p(a,n):(t[i]=create_each_block_1(a),t[i].c(),t[i].m(s.parentNode,s))}for(;i<t.length;i+=1)t[i].d(1);t.length=o.length}},d(e){e&&detach(n),e&&detach(i),destroy_each(t,e),e&&detach(s)}}}function create_if_block_6(){let t;return{c(){t=text(", ")},l(e){t=claim_text(e,", ")},m(e,n){insert_hydration(e,t,n)},d(e){e&&detach(t)}}}function create_each_block_1(e){let n,o=e[19]+"",i,a,r=e[21]<findFileReferences(e[16].file).length-1,s,t=r&&create_if_block_6(e);return{c(){n=element("a"),i=text(o),t&&t.c(),s=empty(),this.h()},l(e){n=claim_element(e,"A",{href:!0});var a=children(n);i=claim_text(a,o),a.forEach(detach),t&&t.l(e),s=empty(),this.h()},h(){attr(n,"href",a=e[19])},m(e,o){insert_hydration(e,n,o),append_hydration(n,i),t&&t.m(e,o),insert_hydration(e,s,o)},p(e,c){c&1&&o!==(o=e[19]+"")&&set_data(i,o),c&1&&a!==(a=e[19])&&attr(n,"href",a),c&1&&(r=e[21]<findFileReferences(e[16].file).length-1),r?t||(t=create_if_block_6(e),t.c(),t.m(s.parentNode,s)):t&&(t.d(1),t=null)},d(e){e&&detach(n),t&&t.d(e),e&&detach(s)}}}function create_each_block(e){let n,s=e[16].file+"",o,i,a=findFileReferences(e[16].file).length>0,t=a&&create_if_block_5(e);return{c(){n=element("div"),o=text(s),i=space(),t&&t.c(),this.h()},l(e){n=claim_element(e,"DIV",{class:!0});var a=children(n);o=claim_text(a,s),i=claim_space(a),t&&t.l(a),a.forEach(detach),this.h()},h(){attr(n,"class","delete-filepath svelte-jo9rpw")},m(e,s){insert_hydration(e,n,s),append_hydration(n,o),append_hydration(n,i),t&&t.m(n,null)},p(e,i){i&1&&s!==(s=e[16].file+"")&&set_data(o,s),i&1&&(a=findFileReferences(e[16].file).length>0),a?t?t.p(e,i):(t=create_if_block_5(e),t.c(),t.m(n,null)):t&&(t.d(1),t=null)},d(e){e&&detach(n),t&&t.d()}}}function create_else_block(e){let t;return{c(){t=text(e[2])},l(n){t=claim_text(n,e[2])},m(e,n){insert_hydration(e,t,n)},p(e,n){n&4&&set_data(t,e[2])},d(e){e&&detach(t)}}}function create_if_block_3(){let t;return{c(){t=text("Missing Required")},l(e){t=claim_text(e,"Missing Required")},m(e,n){insert_hydration(e,t,n)},p:noop,d(e){e&&detach(t)}}}function create_if_block_2(){let t;return{c(){t=text("Changes committed")},l(e){t=claim_text(e,"Changes committed")},m(e,n){insert_hydration(e,t,n)},p:noop,d(e){e&&detach(t)}}}function create_if_block_1(){let t;return{c(){t=text("Error saving")},l(e){t=claim_text(e,"Error saving")},m(e,n){insert_hydration(e,t,n)},p:noop,d(e){e&&detach(t)}}}function create_if_block(){let t;return{c(){t=text("Sending...")},l(e){t=claim_text(e,"Sending...")},m(e,n){insert_hydration(e,t,n)},p:noop,d(e){e&&detach(t)}}}function create_fragment(e){let o,i,n,a,c,l,t=e[5]&&create_if_block_4(e);function d(e){return e[1]=="sending"?create_if_block:e[1]=="failed"?create_if_block_1:e[1]=="sent"?create_if_block_2:e[1]=="missing_required"?create_if_block_3:create_else_block}let r=d(e,-1),s=r(e);return{c(){o=element("div"),t&&t.c(),i=space(),n=element("button"),s.c(),this.h()},l(e){o=claim_element(e,"DIV",{class:!0});var r,a=children(o);t&&t.l(a),i=claim_space(a),n=claim_element(a,"BUTTON",{type:!0,class:!0}),r=children(n),s.l(r),r.forEach(detach),a.forEach(detach),this.h()},h(){attr(n,"type","submit"),n.disabled=e[1],attr(n,"class",a=""+(e[1]+" "+e[4]+" svelte-jo9rpw")),attr(o,"class","button svelte-jo9rpw")},m(a,r){insert_hydration(a,o,r),t&&t.m(o,null),append_hydration(o,i),append_hydration(o,n),s.m(n,null),c||(l=[listen(n,"click",prevent_default(e[13])),listen(n,"click",e[11])],c=!0)},p(e,[c]){e[5]?t?t.p(e,c):(t=create_if_block_4(e),t.c(),t.m(o,i)):t&&(t.d(1),t=null),r===(r=d(e,c))&&s?s.p(e,c):(s.d(1),s=r(e),s&&(s.c(),s.m(n,null))),c&2&&(n.disabled=e[1]),c&18&&a!==(a=""+(e[1]+" "+e[4]+" svelte-jo9rpw"))&&attr(n,"class",a)},i:noop,o:noop,d(e){e&&detach(o),t&&t.d(),s.d(),c=!1,run_all(l)}}}function instance(e,t,n){let{commitList:i,shadowContent:a,buttonText:h,action:s,encoding:c,user:l,afterSubmit:d,status:o}=t,{buttonStyle:u="primary"}=t;const p=env.local??!1;let r;const m=async()=>{n(5,r=!1),n(1,o="sending");try{p?await postLocal(i,a,s,c,l):await publish(i,a,s,c,l),n(1,o="sent"),d?.(),f()}catch(e){throw n(1,o="failed"),f(),e}},f=()=>{setTimeout(()=>{n(1,o=""),n(0,i=[])},900)};function g(t){bubble.call(this,e,t)}const v=()=>n(5,r=!1),b=()=>s==="delete"?n(5,r=!0):s?m():null;return e.$$set=e=>{"commitList"in e&&n(0,i=e.commitList),"shadowContent"in e&&n(7,a=e.shadowContent),"buttonText"in e&&n(2,h=e.buttonText),"action"in e&&n(3,s=e.action),"encoding"in e&&n(8,c=e.encoding),"user"in e&&n(9,l=e.user),"afterSubmit"in e&&n(10,d=e.afterSubmit),"status"in e&&n(1,o=e.status),"buttonStyle"in e&&n(4,u=e.buttonStyle)},[i,o,h,s,u,r,m,a,c,l,d,g,v,b]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{commitList:0,shadowContent:7,buttonText:2,action:3,encoding:8,user:9,afterSubmit:10,status:1,buttonStyle:4})}}export default Component