import{SvelteComponent,attr,claim_element,detach,element,init,insert_hydration,listen,noop,safe_not_equal}from"../../../web_modules/svelte/internal/index.mjs";import{isDate,makeDate,formatDate}from"../date_checker.js";function create_fragment(e){let t,n,s,o;return{c(){t=element("input"),this.h()},l(e){t=claim_element(e,"INPUT",{type:!0}),this.h()},h(){attr(t,"type","date"),t.value=n=isDate(e[0])?makeDate(e[0]):null,t.required=!0},m(n,i){insert_hydration(n,t,i),s||(o=listen(t,"input",e[4]),s=!0)},p(e,[s]){s&1&&n!==(n=isDate(e[0])?makeDate(e[0]):null)&&(t.value=n)},i:noop,o:noop,d(e){e&&detach(t),s=!1,o()}}}function instance(e,t,n){let{schema:o,parentKeys:i,field:s}=t,r,c,l,a;if(o&&o[i]?.options){r=o[i].options.includes("today");const e=/^today\s?(\+|-)\s?([0-9]+)$/g,t=o[i].options.find(t=>e.test(t));if(t){const[,n,s]=new RegExp(e).exec(t);c=n==="+",l=n==="-",a=parseInt(s)}}if(r){let e=new Date;e=makeDate(e),s=formatDate(e,s)}if(c){let e=new Date;e.setDate(e.getDate()+a),e=makeDate(e),s=formatDate(e,s)}if(l){let e=new Date;e.setDate(e.getDate()-a),e=makeDate(e),s=formatDate(e,s)}const d=e=>{n(0,s=formatDate(e,s))},u=e=>d(e.target.value);return e.$$set=e=>{"schema"in e&&n(2,o=e.schema),"parentKeys"in e&&n(3,i=e.parentKeys),"field"in e&&n(0,s=e.field)},[s,d,o,i,u]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{schema:2,parentKeys:3,field:0})}}export default Component