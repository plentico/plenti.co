import{SvelteComponent,append,attr,check_outros,children,claim_component,claim_element,claim_space,claim_text,create_component,destroy_component,destroy_each,detach,element,empty,group_outros,init,insert,listen,mount_component,noop,null_to_empty,run_all,safe_not_equal,set_data,set_input_value,space,text,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import defaults from"../../generated/defaults.js";import ButtonWrapper from"./button_wrapper.js";import validateFilename from"./validate_filename.js";function get_each_context_1(e,t,n){const s=e.slice();return s[15]=t[n],s}function get_each_context(e,t,n){const s=e.slice();return s[12]=t[n],s}function create_else_block_1(e){let o,r,i,n,a,s=defaults,t=[];for(let n=0;n<s.length;n+=1)t[n]=create_each_block_1(get_each_context_1(e,s,n));const c=e=>transition_out(t[e],1,1,()=>{t[e]=null});return{c(){o=element("h1"),r=text("Add content of type:"),i=space(),n=element("div");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){o=claim_element(e,"H1",{});var s,a=children(o);r=claim_text(a,"Add content of type:"),a.forEach(detach),i=claim_space(e),n=claim_element(e,"DIV",{class:!0}),s=children(n);for(let e=0;e<t.length;e+=1)t[e].l(s);s.forEach(detach),this.h()},h(){attr(n,"class","defaults svelte-wnvmau")},m(e,s){insert(e,o,s),append(o,r),insert(e,i,s),insert(e,n,s);for(let e=0;e<t.length;e+=1)t[e].m(n,null);a=!0},p(e,o){if(o&8){s=defaults;let i;for(i=0;i<s.length;i+=1){const a=get_each_context_1(e,s,i);t[i]?(t[i].p(a,o),transition_in(t[i],1)):(t[i]=create_each_block_1(a),t[i].c(),transition_in(t[i],1),t[i].m(n,null))}group_outros();for(i=s.length;i<t.length;i+=1)c(i);check_outros()}},i(){if(a)return;for(let e=0;e<s.length;e+=1)transition_in(t[e]);a=!0},o(){t=t.filter(Boolean);for(let e=0;e<t.length;e+=1)transition_out(t[e]);a=!1},d(e){e&&detach(o),e&&detach(i),e&&detach(n),destroy_each(t,e)}}}function create_if_block(e){let o,g,f,y,d,s,r,j,u,b,w,n,m,p,l,v,h,c,i,a,_,O,t=e[2]&&create_if_block_1(e);return i=new ButtonWrapper({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){o=element("h1"),g=text("Set "),f=text(e[1]),y=text(" filename:"),d=space(),s=element("div"),r=element("span"),j=text("content/"),u=text(e[1]),b=text("/"),w=space(),n=element("input"),p=space(),l=element("span"),v=text(".json"),h=space(),t&&t.c(),c=space(),create_component(i.$$.fragment),this.h()},l(a){o=claim_element(a,"H1",{});var m,_,x,O=children(o);g=claim_text(O,"Set "),f=claim_text(O,e[1]),y=claim_text(O," filename:"),O.forEach(detach),d=claim_space(a),s=claim_element(a,"DIV",{class:!0}),m=children(s),r=claim_element(m,"SPAN",{}),_=children(r),j=claim_text(_,"content/"),u=claim_text(_,e[1]),b=claim_text(_,"/"),_.forEach(detach),w=claim_space(m),n=claim_element(m,"INPUT",{placeholder:!0,class:!0}),p=claim_space(m),l=claim_element(m,"SPAN",{}),x=children(l),v=claim_text(x,".json"),x.forEach(detach),m.forEach(detach),h=claim_space(a),t&&t.l(a),c=claim_space(a),claim_component(i.$$.fragment,a),this.h()},h(){attr(n,"placeholder","filename"),n.autofocus=!0,attr(n,"class",m=""+(null_to_empty(e[2].length>0?"error":"")+" svelte-wnvmau")),attr(s,"class","filename svelte-wnvmau")},m(m,x){insert(m,o,x),append(o,g),append(o,f),append(o,y),insert(m,d,x),insert(m,s,x),append(s,r),append(r,j),append(r,u),append(r,b),append(s,w),append(s,n),set_input_value(n,e[0]),append(s,p),append(s,l),append(l,v),insert(m,h,x),t&&t.m(m,x),insert(m,c,x),mount_component(i,m,x),a=!0,n.focus(),_||(O=listen(n,"input",e[8]),_=!0)},p(e,s){(!a||s&2)&&set_data(f,e[1]),(!a||s&2)&&set_data(u,e[1]),(!a||s&4&&m!==(m=""+(null_to_empty(e[2].length>0?"error":"")+" svelte-wnvmau")))&&attr(n,"class",m),s&1&&n.value!==e[0]&&set_input_value(n,e[0]),e[2]?t?t.p(e,s):(t=create_if_block_1(e),t.c(),t.m(c.parentNode,c)):t&&(t.d(1),t=null);const o={};s&262144&&(o.$$scope={dirty:s,ctx:e}),i.$set(o)},i(e){if(a)return;transition_in(i.$$.fragment,e),a=!0},o(e){transition_out(i.$$.fragment,e),a=!1},d(e){e&&detach(o),e&&detach(d),e&&detach(s),e&&detach(h),t&&t.d(e),e&&detach(c),destroy_component(i,e),_=!1,O()}}}function create_default_slot_1(e){let t,i=e[15].type+"",s,n,o,a;function r(){return e[11](e[15])}return{c(){t=element("button"),s=text(i),n=space(),this.h()},l(e){t=claim_element(e,"BUTTON",{class:!0});var o=children(t);s=claim_text(o,i),o.forEach(detach),n=claim_space(e),this.h()},h(){attr(t,"class","default svelte-wnvmau")},m(e,i){insert(e,t,i),append(t,s),insert(e,n,i),o||(a=listen(t,"click",r),o=!0)},p(t){e=t},d(e){e&&detach(t),e&&detach(n),o=!1,a()}}}function create_each_block_1(e){let t,n;return t=new ButtonWrapper({props:{$$slots:{default:[create_default_slot_1]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,s){mount_component(t,e,s),n=!0},p(e,n){const s={};n&262144&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){if(n)return;transition_in(t.$$.fragment,e),n=!0},o(e){transition_out(t.$$.fragment,e),n=!1},d(e){destroy_component(t,e)}}}function create_if_block_1(e){let n,s=e[2],t=[];for(let n=0;n<s.length;n+=1)t[n]=create_each_block(get_each_context(e,s,n));return{c(){n=element("ul");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){n=claim_element(e,"UL",{class:!0});var s=children(n);for(let e=0;e<t.length;e+=1)t[e].l(s);s.forEach(detach),this.h()},h(){attr(n,"class","errors svelte-wnvmau")},m(e,s){insert(e,n,s);for(let e=0;e<t.length;e+=1)t[e].m(n,null)},p(e,o){if(o&36){s=e[2];let i;for(i=0;i<s.length;i+=1){const a=get_each_context(e,s,i);t[i]?t[i].p(a,o):(t[i]=create_each_block(a),t[i].c(),t[i].m(n,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=s.length}},d(e){e&&detach(n),destroy_each(t,e)}}}function create_else_block(e){let t,n=e[12]+"",s;return{c(){t=element("li"),s=text(n)},l(e){t=claim_element(e,"LI",{});var o=children(t);s=claim_text(o,n),o.forEach(detach)},m(e,n){insert(e,t,n),append(t,s)},p(e,t){t&4&&n!==(n=e[12]+"")&&set_data(s,n)},d(e){e&&detach(t)}}}function create_if_block_2(e){let t,s=e[12].message+"",o,i,n,a,r,c,l;function d(){return e[9](e[12])}return{c(){t=element("li"),o=text(s),i=space(),n=element("span"),a=text("Edit Content"),r=text("?"),this.h()},l(e){t=claim_element(e,"LI",{});var l,c=children(t);o=claim_text(c,s),i=claim_space(c),n=claim_element(c,"SPAN",{class:!0}),l=children(n),a=claim_text(l,"Edit Content"),l.forEach(detach),r=claim_text(c,"?"),c.forEach(detach),this.h()},h(){attr(n,"class","error-link svelte-wnvmau")},m(e,s){insert(e,t,s),append(t,o),append(t,i),append(t,n),append(n,a),append(t,r),c||(l=listen(n,"click",d),c=!0)},p(t,n){e=t,n&4&&s!==(s=e[12].message+"")&&set_data(o,s)},d(e){e&&detach(t),c=!1,l()}}}function create_each_block(e){let n;function o(e){return typeof e[12]=="object"?create_if_block_2:create_else_block}let s=o(e,-1),t=s(e);return{c(){t.c(),n=empty()},l(e){t.l(e),n=empty()},m(e,s){t.m(e,s),insert(e,n,s)},p(e,i){s===(s=o(e,i))&&t?t.p(e,i):(t.d(1),t=s(e),t&&(t.c(),t.m(n.parentNode,n)))},d(e){t.d(e),e&&detach(n)}}}function create_default_slot(e){let t,o,s,n,i,a,r;return{c(){t=element("button"),o=text("Set Filename"),s=space(),n=element("button"),i=text("Go back"),this.h()},l(e){t=claim_element(e,"BUTTON",{class:!0});var a,r=children(t);o=claim_text(r,"Set Filename"),r.forEach(detach),s=claim_space(e),n=claim_element(e,"BUTTON",{class:!0}),a=children(n),i=claim_text(a,"Go back"),a.forEach(detach),this.h()},h(){attr(t,"class","primary svelte-wnvmau"),attr(n,"class","svelte-wnvmau")},m(c,l){insert(c,t,l),append(t,o),insert(c,s,l),insert(c,n,l),append(n,i),a||(r=[listen(t,"click",e[4]),listen(n,"click",e[10])],a=!0)},p:noop,d(e){e&&detach(t),e&&detach(s),e&&detach(n),a=!1,run_all(r)}}}function create_fragment(e){let t,n,o,i;const a=[create_if_block,create_else_block_1],s=[];function r(e){return e[1]?0:1}return t=r(e,-1),n=s[t]=a[t](e),{c(){n.c(),o=empty()},l(e){n.l(e),o=empty()},m(e,n){s[t].m(e,n),insert(e,o,n),i=!0},p(e,[i]){let c=t;t=r(e,i),t===c?s[t].p(e,i):(group_outros(),transition_out(s[c],1,1,()=>{s[c]=null}),check_outros(),n=s[t],n?n.p(e,i):(n=s[t]=a[t](e),n.c()),transition_in(n,1),n.m(o.parentNode,o))},i(){if(i)return;transition_in(n),i=!0},o(){transition_out(n),i=!1},d(e){s[t].d(e),e&&detach(o)}}}function instance(e,t,n){let{showAdd:i}=t,{showEditor:a}=t,s="",o;const r=e=>{n(1,o=e)};let c=[];const d=()=>{n(2,c=validateFilename(s,o)),c.length===0&&l("/#add/"+o+"/"+s)},l=e=>{history.pushState(null,"",e),n(6,i=!1),n(7,a=!0)};function u(){s=this.value,n(0,s)}const h=e=>l(e.contentPath),m=()=>r(null),f=e=>r(e.type);return e.$$set=e=>{"showAdd"in e&&n(6,i=e.showAdd),"showEditor"in e&&n(7,a=e.showEditor)},[s,o,c,r,d,l,i,a,u,h,m,f]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{showAdd:6,showEditor:7})}}export default Component