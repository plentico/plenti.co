import{SvelteComponent,add_flush_callback,append,attr,bind,binding_callbacks,check_outros,children,claim_component,claim_element,claim_space,create_component,destroy_component,destroy_each,detach,element,empty,group_outros,init,insert,is_function,listen,mount_component,run_all,safe_not_equal,space,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import DynamicFormInput from"./dynamic_form_input.js";import ButtonWrapper from"./button_wrapper.js";import Button from"./button.js";import schemas from"../schemas.js";function get_each_context(e,t,n){const s=e.slice();return s[18]=t[n][0],s[19]=t[n][1],s[20]=t,s[21]=n,s}function get_each_context_1(e,t,n){const s=e.slice();return s[22]=t[n],s}function get_each_context_2(e,t,n){const s=e.slice();return s[22]=t[n],s}function create_if_block_2(e){let s,o,n=Object.entries(e[5]),t=[];for(let s=0;s<n.length;s+=1)t[s]=create_each_block_2(get_each_context_2(e,n,s));const i=e=>transition_out(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();s=empty()},l(e){for(let n=0;n<t.length;n+=1)t[n].l(e);s=empty()},m(e,n){for(let s=0;s<t.length;s+=1)t[s].m(e,n);insert(e,s,n),o=!0},p(e,o){if(o&63){n=Object.entries(e[5]);let a;for(a=0;a<n.length;a+=1){const i=get_each_context_2(e,n,a);t[a]?(t[a].p(i,o),transition_in(t[a],1)):(t[a]=create_each_block_2(i),t[a].c(),transition_in(t[a],1),t[a].m(s.parentNode,s))}group_outros();for(a=n.length;a<t.length;a+=1)i(a);check_outros()}},i(){if(o)return;for(let e=0;e<n.length;e+=1)transition_in(t[e]);o=!0},o(){t=t.filter(Boolean);for(let e=0;e<t.length;e+=1)transition_out(t[e]);o=!1},d(e){destroy_each(t,e),e&&detach(s)}}}function create_if_block_3(e){let t,o,i,a,r,s;function c(t){e[6](t)}function l(t){e[7](t)}function d(t){e[8](t)}function u(t){e[9](t)}let n={field:e[4][e[22][0]],label:e[22][0],parentKeys:e[22][0],schema:e[5]};return e[4]!==void 0&&(n.shadowContent=e[4]),e[1]!==void 0&&(n.showMedia=e[1]),e[2]!==void 0&&(n.changingAsset=e[2]),e[3]!==void 0&&(n.localMediaList=e[3]),t=new DynamicFormInput({props:n}),binding_callbacks.push(()=>bind(t,"shadowContent",c)),binding_callbacks.push(()=>bind(t,"showMedia",l)),binding_callbacks.push(()=>bind(t,"changingAsset",d)),binding_callbacks.push(()=>bind(t,"localMediaList",u)),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,n){mount_component(t,e,n),s=!0},p(e,n){const s={};n&48&&(s.field=e[4][e[22][0]]),n&32&&(s.label=e[22][0]),n&32&&(s.parentKeys=e[22][0]),n&32&&(s.schema=e[5]),!o&&n&16&&(o=!0,s.shadowContent=e[4],add_flush_callback(()=>o=!1)),!i&&n&2&&(i=!0,s.showMedia=e[1],add_flush_callback(()=>i=!1)),!a&&n&4&&(a=!0,s.changingAsset=e[2],add_flush_callback(()=>a=!1)),!r&&n&8&&(r=!0,s.localMediaList=e[3],add_flush_callback(()=>r=!1)),t.$set(s)},i(e){if(s)return;transition_in(t.$$.fragment,e),s=!0},o(e){transition_out(t.$$.fragment,e),s=!1},d(e){destroy_component(t,e)}}}function create_each_block_2(e){let n,s,t=e[22][1]?.before===e[18]&&create_if_block_3(e);return{c(){t&&t.c(),n=empty()},l(e){t&&t.l(e),n=empty()},m(e,o){t&&t.m(e,o),insert(e,n,o),s=!0},p(e,s){e[22][1]?.before===e[18]?t?(t.p(e,s),s&33&&transition_in(t,1)):(t=create_if_block_3(e),t.c(),transition_in(t,1),t.m(n.parentNode,n)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(){if(s)return;transition_in(t),s=!0},o(){transition_out(t),s=!1},d(e){t&&t.d(e),e&&detach(n)}}}function create_if_block(e){let s,o,n=Object.entries(e[5]),t=[];for(let s=0;s<n.length;s+=1)t[s]=create_each_block_1(get_each_context_1(e,n,s));const i=e=>transition_out(t[e],1,1,()=>{t[e]=null});return{c(){for(let e=0;e<t.length;e+=1)t[e].c();s=empty()},l(e){for(let n=0;n<t.length;n+=1)t[n].l(e);s=empty()},m(e,n){for(let s=0;s<t.length;s+=1)t[s].m(e,n);insert(e,s,n),o=!0},p(e,o){if(o&63){n=Object.entries(e[5]);let a;for(a=0;a<n.length;a+=1){const i=get_each_context_1(e,n,a);t[a]?(t[a].p(i,o),transition_in(t[a],1)):(t[a]=create_each_block_1(i),t[a].c(),transition_in(t[a],1),t[a].m(s.parentNode,s))}group_outros();for(a=n.length;a<t.length;a+=1)i(a);check_outros()}},i(){if(o)return;for(let e=0;e<n.length;e+=1)transition_in(t[e]);o=!0},o(){t=t.filter(Boolean);for(let e=0;e<t.length;e+=1)transition_out(t[e]);o=!1},d(e){destroy_each(t,e),e&&detach(s)}}}function create_if_block_1(e){let t,o,i,a,r,s;function c(t){e[14](t)}function l(t){e[15](t)}function d(t){e[16](t)}function u(t){e[17](t)}let n={field:e[4][e[22][0]],label:e[22][0],parentKeys:e[22][0],schema:e[5]};return e[4]!==void 0&&(n.shadowContent=e[4]),e[1]!==void 0&&(n.showMedia=e[1]),e[2]!==void 0&&(n.changingAsset=e[2]),e[3]!==void 0&&(n.localMediaList=e[3]),t=new DynamicFormInput({props:n}),binding_callbacks.push(()=>bind(t,"shadowContent",c)),binding_callbacks.push(()=>bind(t,"showMedia",l)),binding_callbacks.push(()=>bind(t,"changingAsset",d)),binding_callbacks.push(()=>bind(t,"localMediaList",u)),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,n){mount_component(t,e,n),s=!0},p(e,n){const s={};n&48&&(s.field=e[4][e[22][0]]),n&32&&(s.label=e[22][0]),n&32&&(s.parentKeys=e[22][0]),n&32&&(s.schema=e[5]),!o&&n&16&&(o=!0,s.shadowContent=e[4],add_flush_callback(()=>o=!1)),!i&&n&2&&(i=!0,s.showMedia=e[1],add_flush_callback(()=>i=!1)),!a&&n&4&&(a=!0,s.changingAsset=e[2],add_flush_callback(()=>a=!1)),!r&&n&8&&(r=!0,s.localMediaList=e[3],add_flush_callback(()=>r=!1)),t.$set(s)},i(e){if(s)return;transition_in(t.$$.fragment,e),s=!0},o(e){transition_out(t.$$.fragment,e),s=!1},d(e){destroy_component(t,e)}}}function create_each_block_1(e){let n,s,t=e[22][1]?.after===e[18]&&create_if_block_1(e);return{c(){t&&t.c(),n=empty()},l(e){t&&t.l(e),n=empty()},m(e,o){t&&t.m(e,o),insert(e,n,o),s=!0},p(e,s){e[22][1]?.after===e[18]?t?(t.p(e,s),s&33&&transition_in(t,1)):(t=create_if_block_1(e),t.c(),transition_in(t,1),t.m(n.parentNode,n)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(){if(s)return;transition_in(t),s=!0},o(){transition_out(t),s=!1},d(e){t&&t.d(e),e&&detach(n)}}}function create_each_block(e){let i,s,h,u,d,l,r,o,c,t=e[5]&&create_if_block_2(e);function m(t){e[10](t,e[18])}function f(t){e[11](t)}function p(t){e[12](t)}function g(t){e[13](t)}let a={label:e[18],parentKeys:e[18],schema:e[5]};e[0].fields[e[18]]!==void 0&&(a.field=e[0].fields[e[18]]),e[1]!==void 0&&(a.showMedia=e[1]),e[2]!==void 0&&(a.changingAsset=e[2]),e[3]!==void 0&&(a.localMediaList=e[3]),s=new DynamicFormInput({props:a}),binding_callbacks.push(()=>bind(s,"field",m)),binding_callbacks.push(()=>bind(s,"showMedia",f)),binding_callbacks.push(()=>bind(s,"changingAsset",p)),binding_callbacks.push(()=>bind(s,"localMediaList",g));let n=e[5]&&create_if_block(e);return{c(){t&&t.c(),i=space(),create_component(s.$$.fragment),r=space(),n&&n.c(),o=empty()},l(e){t&&t.l(e),i=claim_space(e),claim_component(s.$$.fragment,e),r=claim_space(e),n&&n.l(e),o=empty()},m(e,a){t&&t.m(e,a),insert(e,i,a),mount_component(s,e,a),insert(e,r,a),n&&n.m(e,a),insert(e,o,a),c=!0},p(a,r){e=a,e[5]?t?(t.p(e,r),r&32&&transition_in(t,1)):(t=create_if_block_2(e),t.c(),transition_in(t,1),t.m(i.parentNode,i)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros());const c={};r&1&&(c.label=e[18]),r&1&&(c.parentKeys=e[18]),r&32&&(c.schema=e[5]),!h&&r&1&&(h=!0,c.field=e[0].fields[e[18]],add_flush_callback(()=>h=!1)),!u&&r&2&&(u=!0,c.showMedia=e[1],add_flush_callback(()=>u=!1)),!d&&r&4&&(d=!0,c.changingAsset=e[2],add_flush_callback(()=>d=!1)),!l&&r&8&&(l=!0,c.localMediaList=e[3],add_flush_callback(()=>l=!1)),s.$set(c),e[5]?n?(n.p(e,r),r&32&&transition_in(n,1)):(n=create_if_block(e),n.c(),transition_in(n,1),n.m(o.parentNode,o)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(e){if(c)return;transition_in(t),transition_in(s.$$.fragment,e),transition_in(n),c=!0},o(e){transition_out(t),transition_out(s.$$.fragment,e),transition_out(n),c=!1},d(e){t&&t.d(e),e&&detach(i),destroy_component(s,e),e&&detach(r),n&&n.d(e),e&&detach(o)}}}function create_default_slot(e){let t,n,i,s,o,a,r,c;return n=new Button({props:{commitList:[{file:e[0].filepath,contents:JSON.stringify(e[0].fields,void 0,"	")}],buttonText:"Save",action:e[0].isNew?"create":"update",encoding:"text"}}),o=new Button({props:{commitList:[{file:e[0].filepath,contents:JSON.stringify(e[0].fields,void 0,"	")}],buttonText:"Delete",action:"delete",encoding:"text"}}),{c(){t=element("div"),create_component(n.$$.fragment),i=space(),s=element("div"),create_component(o.$$.fragment),this.h()},l(e){t=claim_element(e,"DIV",{class:!0});var a,r=children(t);claim_component(n.$$.fragment,r),r.forEach(detach),i=claim_space(e),s=claim_element(e,"DIV",{class:!0}),a=children(s),claim_component(o.$$.fragment,a),a.forEach(detach),this.h()},h(){attr(t,"class","onSave"),attr(s,"class","onDelete")},m(l,d){insert(l,t,d),mount_component(n,t,null),insert(l,i,d),insert(l,s,d),mount_component(o,s,null),a=!0,r||(c=[listen(t,"click",function(){is_function(e[4]?.onSave)&&e[4]?.onSave.apply(this,arguments)}),listen(s,"click",function(){is_function(e[4]?.onDelete)&&e[4]?.onDelete.apply(this,arguments)})],r=!0)},p(t,s){e=t;const i={};s&1&&(i.commitList=[{file:e[0].filepath,contents:JSON.stringify(e[0].fields,void 0,"	")}]),s&1&&(i.action=e[0].isNew?"create":"update"),n.$set(i);const a={};s&1&&(a.commitList=[{file:e[0].filepath,contents:JSON.stringify(e[0].fields,void 0,"	")}]),o.$set(a)},i(e){if(a)return;transition_in(n.$$.fragment,e),transition_in(o.$$.fragment,e),a=!0},o(e){transition_out(n.$$.fragment,e),transition_out(o.$$.fragment,e),a=!1},d(e){e&&detach(t),destroy_component(n),e&&detach(i),e&&detach(s),destroy_component(o),r=!1,run_all(c)}}}function create_fragment(e){let n,i,s,a,o=Object.entries(e[0].fields),t=[];for(let n=0;n<o.length;n+=1)t[n]=create_each_block(get_each_context(e,o,n));const r=e=>transition_out(t[e],1,1,()=>{t[e]=null});return s=new ButtonWrapper({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){n=element("form");for(let e=0;e<t.length;e+=1)t[e].c();i=space(),create_component(s.$$.fragment),this.h()},l(e){n=claim_element(e,"FORM",{class:!0});var o=children(n);for(let e=0;e<t.length;e+=1)t[e].l(o);i=claim_space(o),claim_component(s.$$.fragment,o),o.forEach(detach),this.h()},h(){attr(n,"class","svelte-kc7an7")},m(e,o){insert(e,n,o);for(let e=0;e<t.length;e+=1)t[e].m(n,null);append(n,i),mount_component(s,n,null),a=!0},p(e,[a]){if(a&63){o=Object.entries(e[0].fields);let s;for(s=0;s<o.length;s+=1){const r=get_each_context(e,o,s);t[s]?(t[s].p(r,a),transition_in(t[s],1)):(t[s]=create_each_block(r),t[s].c(),transition_in(t[s],1),t[s].m(n,i))}group_outros();for(s=o.length;s<t.length;s+=1)r(s);check_outros()}const c={};a&134217745&&(c.$$scope={dirty:a,ctx:e}),s.$set(c)},i(e){if(a)return;for(let e=0;e<o.length;e+=1)transition_in(t[e]);transition_in(s.$$.fragment,e),a=!0},o(e){t=t.filter(Boolean);for(let e=0;e<t.length;e+=1)transition_out(t[e]);transition_out(s.$$.fragment,e),a=!1},d(e){e&&detach(n),destroy_each(t,e),destroy_component(s)}}}function instance(e,t,n){let c,{content:a}=t,{showMedia:s}=t,{changingAsset:o}=t,{localMediaList:i}=t,{shadowContent:r}=t;function h(e){r=e,n(4,r)}function d(e){s=e,n(1,s)}function u(e){o=e,n(2,o)}function l(e){i=e,n(3,i)}function m(t,s){e.$$.not_equal(a.fields[s],t)&&(a.fields[s]=t,n(0,a))}function f(e){s=e,n(1,s)}function p(e){o=e,n(2,o)}function g(e){i=e,n(3,i)}function v(e){r=e,n(4,r)}function b(e){s=e,n(1,s)}function j(e){o=e,n(2,o)}function y(e){i=e,n(3,i)}return e.$$set=e=>{"content"in e&&n(0,a=e.content),"showMedia"in e&&n(1,s=e.showMedia),"changingAsset"in e&&n(2,o=e.changingAsset),"localMediaList"in e&&n(3,i=e.localMediaList),"shadowContent"in e&&n(4,r=e.shadowContent)},e.$$.update=()=>{if(e.$$.dirty&1)$:n(5,c=schemas[a.type])},[a,s,o,i,r,c,h,d,u,l,m,f,p,g,v,b,j,y]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{content:0,showMedia:1,changingAsset:2,localMediaList:3,shadowContent:4})}}export default Component