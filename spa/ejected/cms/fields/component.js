import{SvelteComponent,add_flush_callback,add_render_callback,append,attr,bind,binding_callbacks,check_outros,children,claim_component,claim_element,claim_space,claim_text,create_animation,create_bidirectional_transition,create_component,destroy_component,detach,element,fix_and_outro_and_destroy_block,fix_position,group_outros,init,insert,is_function,listen,mount_component,noop,null_to_empty,prevent_default,run_all,safe_not_equal,set_data,space,svg_element,text,transition_in,transition_out,update_keyed_each}from"../../../web_modules/svelte/internal/index.mjs";import DynamicFormInput from"../dynamic_form_input.js";import{slide}from"../../../web_modules/svelte/transition/index.mjs";import{flip}from"../../../web_modules/svelte/animate/index.mjs";function get_each_context(e,t,n){const s=e.slice();return s[40]=t[n],s[41]=t,s[42]=n,s}function create_else_block(e){let s,t=e[42]+"",n;return{c(){s=text("Component "),n=text(t)},l(e){s=claim_text(e,"Component "),n=claim_text(e,t)},m(e,t){insert(e,s,t),insert(e,n,t)},p(e,s){s[0]&1&&t!==(t=e[42]+"")&&set_data(n,t)},d(e){e&&detach(s),e&&detach(n)}}}function create_if_block_3(e){let t=(Object.values(e[40])[0].constructor==="".constructor?Object.values(e[40])[0].replace(/<[^>]*>?/gm,"").slice(0,20).concat(e[40].length>20?"...":""):Object.keys(e[40])[0])+"",n;return{c(){n=text(t)},l(e){n=claim_text(e,t)},m(e,t){insert(e,n,t)},p(e,s){s[0]&1&&t!==(t=(Object.values(e[40])[0].constructor==="".constructor?Object.values(e[40])[0].replace(/<[^>]*>?/gm,"").slice(0,20).concat(e[40].length>20?"...":""):Object.keys(e[40])[0])+"")&&set_data(n,t)},d(e){e&&detach(n)}}}function create_if_block_2(e){let t=e[40].replace(/<[^>]*>?/gm,"").slice(0,20).concat(e[40].length>20?"...":"")+"",n;return{c(){n=text(t)},l(e){n=claim_text(e,t)},m(e,t){insert(e,n,t)},p(e,s){s[0]&1&&t!==(t=e[40].replace(/<[^>]*>?/gm,"").slice(0,20).concat(e[40].length>20?"...":"")+"")&&set_data(n,t)},d(e){e&&detach(n)}}}function create_if_block_1(e){let n,t,s,o,i,a;function r(){return e[30](e[40])}return{c(){n=element("button"),t=svg_element("svg"),s=svg_element("path"),o=svg_element("path"),this.h()},l(e){n=claim_element(e,"BUTTON",{class:!0});var i,a=children(n);t=claim_element(a,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0},1),i=children(t),s=claim_element(i,"path",{d:!0,fill:!0},1),children(s).forEach(detach),o=claim_element(i,"path",{d:!0},1),children(o).forEach(detach),i.forEach(detach),a.forEach(detach),this.h()},h(){attr(s,"d","M0 0h24v24H0z"),attr(s,"fill","none"),attr(o,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"height","16"),attr(t,"viewBox","0 0 24 24"),attr(t,"width","16"),attr(n,"class","close svelte-3zf86y")},m(e,c){insert(e,n,c),append(n,t),append(t,s),append(t,o),i||(a=listen(n,"click",prevent_default(r)),i=!0)},p(t){e=t},d(e){e&&detach(n),i=!1,a()}}}function create_if_block(e){let s,t,l,a,r,c,n,i;function d(t){e[31](t,e[42])}function u(t){e[32](t)}function h(t){e[33](t)}function m(t){e[34](t)}let o={label:null,parentKeys:e[4]+"."+e[42],schema:e[5]};return e[0][e[42]]!==void 0&&(o.field=e[0][e[42]]),e[1]!==void 0&&(o.showMedia=e[1]),e[2]!==void 0&&(o.changingAsset=e[2]),e[3]!==void 0&&(o.localMediaList=e[3]),t=new DynamicFormInput({props:o}),binding_callbacks.push(()=>bind(t,"field",d)),binding_callbacks.push(()=>bind(t,"showMedia",u)),binding_callbacks.push(()=>bind(t,"changingAsset",h)),binding_callbacks.push(()=>bind(t,"localMediaList",m)),{c(){s=element("div"),create_component(t.$$.fragment)},l(e){s=claim_element(e,"DIV",{});var n=children(s);claim_component(t.$$.fragment,n),n.forEach(detach)},m(e,n){insert(e,s,n),mount_component(t,s,null),i=!0},p(n,s){e=n;const o={};s[0]&17&&(o.parentKeys=e[4]+"."+e[42]),s[0]&32&&(o.schema=e[5]),!l&&s[0]&1&&(l=!0,o.field=e[0][e[42]],add_flush_callback(()=>l=!1)),!a&&s[0]&2&&(a=!0,o.showMedia=e[1],add_flush_callback(()=>a=!1)),!r&&s[0]&4&&(r=!0,o.changingAsset=e[2],add_flush_callback(()=>r=!1)),!c&&s[0]&8&&(c=!0,o.localMediaList=e[3],add_flush_callback(()=>c=!1)),t.$set(o)},i(e){if(i)return;transition_in(t.$$.fragment,e),add_render_callback(()=>{n||(n=create_bidirectional_transition(s,slide,{duration:300},!0)),n.run(1)}),i=!0},o(e){transition_out(t.$$.fragment,e),n||(n=create_bidirectional_transition(s,slide,{duration:300},!1)),n.run(0),i=!1},d(e){e&&detach(s),destroy_component(t),e&&n&&n.end()}}}function create_each_block(e,t){let s,a,l,n,w,b,_,y,O,v,g,L,m,h,d,x,E,S,R,u,c,C,k,A,P,f,I,j,D,N=t[8].includes(t[42]),M,F,T,W,B=noop,p,H,$;function U(...e){return t[28](t[42],...e)}function K(...e){return t[29](t[42],...e)}function V(e){return e[40].constructor==="".constructor?create_if_block_2:e[40].constructor==={}.constructor?create_if_block_3:create_else_block}let z=V(t,[-1,-1]),r=z(t),i=t[6]&&create_if_block_1(t),o=N&&create_if_block(t);return{key:e,first:null,c(){s=element("div"),a=element("div"),l=element("div"),n=svg_element("svg"),w=svg_element("path"),b=svg_element("circle"),_=svg_element("circle"),y=svg_element("circle"),O=svg_element("circle"),v=svg_element("circle"),g=svg_element("circle"),L=space(),m=element("div"),h=element("button"),d=svg_element("svg"),x=svg_element("path"),E=svg_element("path"),R=space(),u=element("button"),c=svg_element("svg"),C=svg_element("path"),k=svg_element("path"),P=space(),f=element("div"),r.c(),I=space(),j=element("div"),i&&i.c(),D=space(),o&&o.c(),M=space(),this.h()},l(e){s=claim_element(e,"DIV",{id:!0,"data-index":!0,"data-id":!0,"data-graby":!0,class:!0});var t,p,S,F,T,z,N,H,B,V,A=children(s);a=claim_element(A,"DIV",{class:!0}),t=children(a),l=claim_element(t,"DIV",{class:!0}),H=children(l),n=claim_element(H,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0},1),p=children(n),w=claim_element(p,"path",{stroke:!0,d:!0,fill:!0},1),children(w).forEach(detach),b=claim_element(p,"circle",{cx:!0,cy:!0,r:!0},1),children(b).forEach(detach),_=claim_element(p,"circle",{cx:!0,cy:!0,r:!0},1),children(_).forEach(detach),y=claim_element(p,"circle",{cx:!0,cy:!0,r:!0},1),children(y).forEach(detach),O=claim_element(p,"circle",{cx:!0,cy:!0,r:!0},1),children(O).forEach(detach),v=claim_element(p,"circle",{cx:!0,cy:!0,r:!0},1),children(v).forEach(detach),g=claim_element(p,"circle",{cx:!0,cy:!0,r:!0},1),children(g).forEach(detach),p.forEach(detach),H.forEach(detach),L=claim_space(t),m=claim_element(t,"DIV",{class:!0}),S=children(m),h=claim_element(S,"BUTTON",{class:!0,style:!0}),z=children(h),d=claim_element(z,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0},1),T=children(d),x=claim_element(T,"path",{d:!0,fill:!0},1),children(x).forEach(detach),E=claim_element(T,"path",{d:!0},1),children(E).forEach(detach),T.forEach(detach),z.forEach(detach),R=claim_space(S),u=claim_element(S,"BUTTON",{class:!0,style:!0}),N=children(u),c=claim_element(N,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0},1),F=children(c),C=claim_element(F,"path",{d:!0,fill:!0},1),children(C).forEach(detach),k=claim_element(F,"path",{d:!0},1),children(k).forEach(detach),F.forEach(detach),N.forEach(detach),S.forEach(detach),P=claim_space(t),f=claim_element(t,"DIV",{class:!0}),B=children(f),r.l(B),B.forEach(detach),I=claim_space(t),j=claim_element(t,"DIV",{class:!0}),V=children(j),i&&i.l(V),V.forEach(detach),t.forEach(detach),D=claim_space(A),o&&o.l(A),M=claim_space(A),A.forEach(detach),this.h()},h(){attr(w,"stroke","none"),attr(w,"d","M0 0h24v24H0z"),attr(w,"fill","none"),attr(b,"cx","5"),attr(b,"cy","9"),attr(b,"r","1"),attr(_,"cx","5"),attr(_,"cy","15"),attr(_,"r","1"),attr(y,"cx","12"),attr(y,"cy","9"),attr(y,"r","1"),attr(O,"cx","12"),attr(O,"cy","15"),attr(O,"r","1"),attr(v,"cx","19"),attr(v,"cy","9"),attr(v,"r","1"),attr(g,"cx","19"),attr(g,"cy","15"),attr(g,"r","1"),attr(n,"xmlns","http://www.w3.org/2000/svg"),attr(n,"class","icon icon-tabler icon-tabler-grip-horizontal"),attr(n,"width","30"),attr(n,"height","30"),attr(n,"viewBox","0 0 24 24"),attr(n,"stroke-width","1.5"),attr(n,"stroke","#2c3e50"),attr(n,"fill","none"),attr(n,"stroke-linecap","round"),attr(n,"stroke-linejoin","round"),attr(l,"class","grip svelte-3zf86y"),attr(x,"d","M0 0h24v24H0V0z"),attr(x,"fill","none"),attr(E,"d","M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6 1.41 1.41z"),attr(d,"xmlns","http://www.w3.org/2000/svg"),attr(d,"viewBox","0 0 24 24"),attr(d,"width","16px"),attr(d,"height","16px"),attr(h,"class","up svelte-3zf86y"),attr(h,"style",S="visibility: "+(t[42]>0?"":"hidden")+";"),attr(C,"d","M0 0h24v24H0V0z"),attr(C,"fill","none"),attr(k,"d","M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"),attr(c,"xmlns","http://www.w3.org/2000/svg"),attr(c,"viewBox","0 0 24 24"),attr(c,"width","16px"),attr(c,"height","16px"),attr(u,"class","down svelte-3zf86y"),attr(u,"style",A="visibility: "+(t[42]<t[0].length-1?"":"hidden")+";"),attr(m,"class","buttons svelte-3zf86y"),attr(f,"class","content svelte-3zf86y"),attr(j,"class","buttons svelte-3zf86y"),attr(a,"class","item svelte-3zf86y"),attr(s,"id",F=t[10]&&t[15]==t[10].dataset.id?"grabbed":""),attr(s,"data-index",T=t[42]),attr(s,"data-id",t[15]),attr(s,"data-graby","0"),attr(s,"class","item-wrapper svelte-3zf86y"),this.first=s},m(e,A){insert(e,s,A),append(s,a),append(a,l),append(l,n),append(n,w),append(n,b),append(n,_),append(n,y),append(n,O),append(n,v),append(n,g),append(a,L),append(a,m),append(m,h),append(h,d),append(d,x),append(d,E),append(m,R),append(m,u),append(u,c),append(c,C),append(c,k),append(a,P),append(a,f),r.m(f,null),append(a,I),append(a,j),i&&i.m(j,null),append(s,D),o&&o.m(s,null),append(s,M),p=!0,H||($=[listen(l,"mousedown",t[24]),listen(l,"touchstart",t[25]),listen(l,"mouseenter",t[26]),listen(l,"touchmove",t[27]),listen(h,"click",prevent_default(U)),listen(u,"click",prevent_default(K)),listen(f,"click",prevent_default(function(){is_function(t[14](t[42]))&&t[14](t[42]).apply(this,arguments)}))],H=!0)},p(e,n){t=e,(!p||n[0]&1&&S!==(S="visibility: "+(t[42]>0?"":"hidden")+";"))&&attr(h,"style",S),(!p||n[0]&1&&A!==(A="visibility: "+(t[42]<t[0].length-1?"":"hidden")+";"))&&attr(u,"style",A),z===(z=V(t,n))&&r?r.p(t,n):(r.d(1),r=z(t),r&&(r.c(),r.m(f,null))),t[6]?i?i.p(t,n):(i=create_if_block_1(t),i.c(),i.m(j,null)):i&&(i.d(1),i=null),n[0]&257&&(N=t[8].includes(t[42])),N?o?(o.p(t,n),n[0]&257&&transition_in(o,1)):(o=create_if_block(t),o.c(),transition_in(o,1),o.m(s,M)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros()),(!p||n[0]&1024&&F!==(F=t[10]&&t[15]==t[10].dataset.id?"grabbed":""))&&attr(s,"id",F),(!p||n[0]&1&&T!==(T=t[42]))&&attr(s,"data-index",T)},r(){W=s.getBoundingClientRect()},f(){fix_position(s),B()},a(){B(),B=create_animation(s,W,flip,{duration:t[7]?null:200})},i(){if(p)return;transition_in(o),p=!0},o(){transition_out(o),p=!1},d(e){e&&detach(s),r.d(),i&&i.d(),o&&o.d(),H=!1,run_all($)}}}function create_fragment(e){let o,s,r,l,c,d,n,t=[],h=new Map,i,u,m,a=e[0];const f=e=>e[15]=e[7]?e[42]:JSON.stringify(e[40]);for(let n=0;n<a.length;n+=1){let s=get_each_context(e,a,n),o=f(s);h.set(o,t[n]=create_each_block(o,s))}return{c(){o=element("div"),s=element("div"),r=element("p"),d=space(),n=element("div");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){o=claim_element(e,"DIV",{class:!0});var a,c,i=children(o);s=claim_element(i,"DIV",{id:!0,class:!0,style:!0}),a=children(s),r=claim_element(a,"P",{class:!0}),children(r).forEach(detach),a.forEach(detach),d=claim_space(i),n=claim_element(i,"DIV",{class:!0}),c=children(n);for(let e=0;e<t.length;e+=1)t[e].l(c);c.forEach(detach),i.forEach(detach),this.h()},h(){attr(r,"class","svelte-3zf86y"),attr(s,"id","ghost"),attr(s,"class",l=""+(null_to_empty(e[10]?"item haunting":"item")+" svelte-3zf86y")),attr(s,"style",c="top: "+(e[11]+e[12]-e[13])+"px"),attr(n,"class","list svelte-3zf86y"),attr(o,"class","dragdroplist svelte-3zf86y")},m(a,c){insert(a,o,c),append(o,s),append(s,r),e[23](s),append(o,d),append(o,n);for(let e=0;e<t.length;e+=1)t[e].m(n,null);i=!0,u||(m=[listen(n,"mousemove",e[35]),listen(n,"touchmove",e[36]),listen(n,"mouseup",e[37]),listen(n,"touchend",e[38])],u=!0)},p(e,o){if((!i||o[0]&1024&&l!==(l=""+(null_to_empty(e[10]?"item haunting":"item")+" svelte-3zf86y")))&&attr(s,"class",l),(!i||o[0]&14336&&c!==(c="top: "+(e[11]+e[12]-e[13])+"px"))&&attr(s,"style",c),o[0]&6145535){a=e[0],group_outros();for(let e=0;e<t.length;e+=1)t[e].r();t=update_keyed_each(t,o,f,1,e,a,h,n,fix_and_outro_and_destroy_block,create_each_block,null,get_each_context);for(let e=0;e<t.length;e+=1)t[e].a();check_outros()}},i(){if(i)return;for(let e=0;e<a.length;e+=1)transition_in(t[e]);i=!0},o(){for(let e=0;e<t.length;e+=1)transition_out(t[e]);i=!1},d(n){n&&detach(o),e[23](null);for(let e=0;e<t.length;e+=1)t[e].d();u=!1,run_all(m)}}}function instance(e,t,n){let{field:s}=t,{showMedia:c}=t,{changingAsset:l}=t,{localMediaList:d}=t,{parentKeys:g}=t,{schema:x}=t,m=!1,i=[];const E=e=>{i.length===1&&i.includes(e)&&setTimeout(()=>{n(7,m=!1)},300),i.includes(e)?n(8,i=i.filter(t=>t!==e)):(n(8,i=[...i,e]),n(7,m=!0))};let{removesItems:_=!0}=t,S,a,o,y,v=0,b=0,j=0;const f=(e,t)=>{n(10,o=t),n(10,o.dataset.grabY=e,o),n(9,a.innerHTML=o.innerHTML,a),n(12,b=o.getBoundingClientRect().y-e),r(e)},r=e=>{o&&(n(11,v=e),n(13,j=a.parentNode.getBoundingClientRect().y))},w=e=>{r(e.clientY);let t=document.elementFromPoint(e.clientX,e.clientY).closest(".item-wrapper");t&&t!=y&&(y=t,p(e,t))},p=(e,t)=>{o&&t!=o&&t.classList.contains("item-wrapper")&&u(parseInt(o.dataset.index),parseInt(t.dataset.index))},u=(e,t)=>{let o=s[e];n(0,s[e]=s[t],s),n(0,s[t]=o,s)},h=e=>{n(10,o=null)},O=e=>{n(0,s=s.filter(t=>t!==e))};function k(e){binding_callbacks[e?"unshift":"push"](()=>{a=e,n(9,a)})}const A=function(e){f(e.clientY,this.closest(".item-wrapper"))},C=function(e){f(e.touches[0].clientY,this.closest(".item-wrapper"))},M=function(e){e.stopPropagation(),p(e,e.target.closest(".item-wrapper"))},F=function(e){e.stopPropagation(),e.preventDefault(),w(e.touches[0])},T=function(e){u(e,e-1)},z=function(e){u(e,e+1)},D=e=>O(e);function N(t,o){e.$$.not_equal(s[o],t)&&(s[o]=t,n(0,s))}function L(e){c=e,n(1,c)}function R(e){l=e,n(2,l)}function P(e){d=e,n(3,d)}const H=function(e){e.stopPropagation(),r(e.clientY)},I=function(e){e.stopPropagation(),r(e.touches[0].clientY)},B=function(e){e.stopPropagation(),h(e)},V=function(e){e.stopPropagation(),h(e.touches[0])};return e.$$set=e=>{"field"in e&&n(0,s=e.field),"showMedia"in e&&n(1,c=e.showMedia),"changingAsset"in e&&n(2,l=e.changingAsset),"localMediaList"in e&&n(3,d=e.localMediaList),"parentKeys"in e&&n(4,g=e.parentKeys),"schema"in e&&n(5,x=e.schema),"removesItems"in e&&n(6,_=e.removesItems)},[s,c,l,d,g,x,_,m,i,a,o,v,b,j,E,S,f,r,w,p,u,h,O,k,A,C,M,F,T,z,D,N,L,R,P,H,I,B,V]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{field:0,showMedia:1,changingAsset:2,localMediaList:3,parentKeys:4,schema:5,removesItems:6},[-1,-1])}}export default Component