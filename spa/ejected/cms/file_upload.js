import{SvelteComponent,add_flush_callback,append,attr,bind,binding_callbacks,bubble,check_outros,children,claim_component,claim_element,claim_space,claim_text,create_component,destroy_component,detach,element,empty,group_outros,init,insert,listen,mount_component,noop,prevent_default,run_all,safe_not_equal,space,svg_element,text,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import MediaGrid from"./media_grid.js";import ButtonWrapper from"./button_wrapper.js";import Button from"./button.js";function create_else_block_1(e){let n,l,t,a,m,h,o,y,d,b,f,g,r,v,p,i,s,c,j,u,_,w;return{c(){n=element("div"),l=element("div"),t=svg_element("svg"),a=svg_element("path"),m=svg_element("path"),h=svg_element("polyline"),o=svg_element("line"),y=space(),d=element("div"),b=text("Drag a file here to upload"),g=space(),r=element("div"),v=text("Or"),p=space(),i=element("div"),s=element("label"),c=element("input"),j=space(),u=element("span"),this.h()},l(e){n=claim_element(e,"DIV",{class:!0});var f,_,O,x,C,E,w=children(n);l=claim_element(w,"DIV",{class:!0}),O=children(l),t=claim_element(O,"svg",{xmlns:!0,class:!0,width:!0,height:!0,viewBox:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-linejoin":!0},1),f=children(t),a=claim_element(f,"path",{stroke:!0,d:!0,fill:!0},1),children(a).forEach(detach),m=claim_element(f,"path",{d:!0},1),children(m).forEach(detach),h=claim_element(f,"polyline",{points:!0},1),children(h).forEach(detach),o=claim_element(f,"line",{x1:!0,y1:!0,x2:!0,y2:!0},1),children(o).forEach(detach),f.forEach(detach),O.forEach(detach),y=claim_space(w),d=claim_element(w,"DIV",{class:!0}),x=children(d),b=claim_text(x,"Drag a file here to upload"),x.forEach(detach),w.forEach(detach),g=claim_space(e),r=claim_element(e,"DIV",{class:!0}),C=children(r),v=claim_text(C,"Or"),C.forEach(detach),p=claim_space(e),i=claim_element(e,"DIV",{}),E=children(i),s=claim_element(E,"LABEL",{class:!0}),_=children(s),c=claim_element(_,"INPUT",{type:!0,"aria-label":!0,class:!0}),j=claim_space(_),u=claim_element(_,"SPAN",{class:!0}),children(u).forEach(detach),_.forEach(detach),E.forEach(detach),this.h()},h(){attr(a,"stroke","none"),attr(a,"d","M0 0h24v24H0z"),attr(a,"fill","none"),attr(m,"d","M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"),attr(h,"points","9 15 12 12 15 15"),attr(o,"x1","12"),attr(o,"y1","12"),attr(o,"x2","12"),attr(o,"y2","21"),attr(t,"xmlns","http://www.w3.org/2000/svg"),attr(t,"class","icon icon-tabler icon-tabler-cloud-upload"),attr(t,"width","44"),attr(t,"height","44"),attr(t,"viewBox","0 0 24 24"),attr(t,"stroke-width","1.5"),attr(t,"stroke","#2c3e50"),attr(t,"fill","none"),attr(t,"stroke-linecap","round"),attr(t,"stroke-linejoin","round"),attr(l,"class","drop-icon"),attr(d,"class","drop-text"),attr(n,"class",f="drop"+(e[1]?" active":"")+" svelte-g56pq5"),attr(r,"class","or svelte-g56pq5"),attr(c,"type","file"),c.multiple="multiple",attr(c,"aria-label","File browser"),attr(c,"class","svelte-g56pq5"),attr(u,"class","file-custom svelte-g56pq5"),attr(s,"class","file svelte-g56pq5")},m(f,O){insert(f,n,O),append(n,l),append(l,t),append(t,a),append(t,m),append(t,h),append(t,o),append(n,y),append(n,d),append(d,b),insert(f,g,O),insert(f,r,O),append(r,v),insert(f,p,O),insert(f,i,O),append(i,s),append(s,c),append(s,j),append(s,u),_||(w=[listen(n,"dragenter",e[4]),listen(n,"dragleave",e[4]),listen(n,"drop",prevent_default(e[12])),listen(n,"dragover",prevent_default(e[8])),listen(i,"change",e[13])],_=!0)},p(e,t){t&2&&f!==(f="drop"+(e[1]?" active":"")+" svelte-g56pq5")&&attr(n,"class",f)},i:noop,o:noop,d(e){e&&detach(n),e&&detach(g),e&&detach(r),e&&detach(p),e&&detach(i),_=!1,run_all(w)}}}function create_if_block(e){let t,i,s,n,o;function r(t){e[9](t)}let a={files:e[7](e[0])};return e[2]!==void 0&&(a.selectedMedia=e[2]),t=new MediaGrid({props:a}),binding_callbacks.push(()=>bind(t,"selectedMedia",r)),n=new ButtonWrapper({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment),s=space(),create_component(n.$$.fragment)},l(e){claim_component(t.$$.fragment,e),s=claim_space(e),claim_component(n.$$.fragment,e)},m(e,i){mount_component(t,e,i),insert(e,s,i),mount_component(n,e,i),o=!0},p(e,s){const o={};s&1&&(o.files=e[7](e[0])),!i&&s&4&&(i=!0,o.selectedMedia=e[2],add_flush_callback(()=>i=!1)),t.$set(o);const a={};s&32773&&(a.$$scope={dirty:s,ctx:e}),n.$set(a)},i(e){if(o)return;transition_in(t.$$.fragment,e),transition_in(n.$$.fragment,e),o=!0},o(e){transition_out(t.$$.fragment,e),transition_out(n.$$.fragment,e),o=!1},d(e){destroy_component(t,e),e&&detach(s),destroy_component(n,e)}}}function create_else_block(e){let t,n,s,o;return{c(){t=element("button"),n=text("Discard all")},l(e){t=claim_element(e,"BUTTON",{});var s=children(t);n=claim_text(s,"Discard all"),s.forEach(detach)},m(i,a){insert(i,t,a),append(t,n),s||(o=listen(t,"click",prevent_default(e[11])),s=!0)},p:noop,d(e){e&&detach(t),s=!1,o()}}}function create_if_block_1(e){let t,n,s,o;return{c(){t=element("button"),n=text("Discard selected")},l(e){t=claim_element(e,"BUTTON",{});var s=children(t);n=claim_text(s,"Discard selected"),s.forEach(detach)},m(i,a){insert(i,t,a),append(t,n),s||(o=listen(t,"click",prevent_default(e[6])),s=!0)},p:noop,d(e){e&&detach(t),s=!1,o()}}}function create_default_slot(e){let n,r,o,s,i;function d(t){e[10](t)}let c={buttonText:"Save Media",action:"create",encoding:"base64"};e[0]!==void 0&&(c.mediaList=e[0]),n=new Button({props:c}),binding_callbacks.push(()=>bind(n,"mediaList",d));function l(e){return e[2].length>0?create_if_block_1:create_else_block}let a=l(e,-1),t=a(e);return{c(){create_component(n.$$.fragment),o=space(),t.c(),s=empty()},l(e){claim_component(n.$$.fragment,e),o=claim_space(e),t.l(e),s=empty()},m(e,a){mount_component(n,e,a),insert(e,o,a),t.m(e,a),insert(e,s,a),i=!0},p(e,o){const i={};!r&&o&1&&(r=!0,i.mediaList=e[0],add_flush_callback(()=>r=!1)),n.$set(i),a===(a=l(e,o))&&t?t.p(e,o):(t.d(1),t=a(e),t&&(t.c(),t.m(s.parentNode,s)))},i(e){if(i)return;transition_in(n.$$.fragment,e),i=!0},o(e){transition_out(n.$$.fragment,e),i=!1},d(e){destroy_component(n,e),e&&detach(o),t.d(e),e&&detach(s)}}}function create_fragment(e){let s,t,n,i;const a=[create_if_block,create_else_block_1],o=[];function r(e){return e[0].length>0?0:1}return t=r(e,-1),n=o[t]=a[t](e),{c(){s=element("div"),n.c(),this.h()},l(e){s=claim_element(e,"DIV",{class:!0});var t=children(s);n.l(t),t.forEach(detach),this.h()},h(){attr(s,"class","upload-wrapper svelte-g56pq5")},m(e,n){insert(e,s,n),o[t].m(s,null),i=!0},p(e,[i]){let c=t;t=r(e,i),t===c?o[t].p(e,i):(group_outros(),transition_out(o[c],1,1,()=>{o[c]=null}),check_outros(),n=o[t],n?n.p(e,i):(n=o[t]=a[t](e),n.c()),transition_in(n,1),n.m(s,null))},i(){if(i)return;transition_in(n),i=!0},o(){transition_out(n),i=!1},d(e){e&&detach(s),o[t].d()}}}function instance(e,t,n){let s=[];const a=e=>{let t=new FileReader;t.readAsDataURL(e),t.onload=t=>{n(0,s=[...s,{file:"assets/"+e.name,contents:t.target.result}])}},r=e=>{Array.from(e).forEach(e=>{a(e)})};let i;const d=()=>{n(1,i=!i)},c=e=>{if(e.dataTransfer.items)for(let t=0;t<e.dataTransfer.items.length;t++)if(e.dataTransfer.items[t].kind==="file"){let n=e.dataTransfer.items[t].getAsFile();a(n)}};let o=[];const l=()=>{o.forEach(e=>{n(0,s=s.filter(t=>t.contents!==e)),n(2,o=[])})},u=e=>e.map(e=>e.contents);function h(t){bubble.call(this,e,t)}function m(e){o=e,n(2,o)}function f(e){s=e,n(0,s)}const p=()=>n(0,s=[]),g=e=>c(e),v=e=>r(e.target.files);return[s,i,o,r,d,c,l,u,h,m,f,p,g,v]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}export default Component