import{SvelteComponent,append,attr,binding_callbacks,children,claim_component,claim_element,claim_space,claim_text,create_component,destroy_component,detach,element,init,insert,mount_component,query_selector_all,safe_not_equal,space,text,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import{onMount}from"../../web_modules/svelte/index.mjs";import ButtonWrapper from"./button_wrapper.js";import Button from"./button.js";function create_default_slot(e){let t,s,n,i,o;return t=new Button({props:{mediaList:[{file:e[0].filepath,contents:JSON.stringify(e[0].fields,void 0,"	")}],buttonText:"Publish",action:e[0].isNew?"create":"update",encoding:"text"}}),{c(){create_component(t.$$.fragment),s=space(),n=element("button"),i=text("Reset")},l(e){claim_component(t.$$.fragment,e),s=claim_space(e),n=claim_element(e,"BUTTON",{});var o=children(n);i=claim_text(o,"Reset"),o.forEach(detach)},m(e,a){mount_component(t,e,a),insert(e,s,a),insert(e,n,a),append(n,i),o=!0},p(e,n){const s={};n&1&&(s.mediaList=[{file:e[0].filepath,contents:JSON.stringify(e[0].fields,void 0,"	")}]),n&1&&(s.action=e[0].isNew?"create":"update"),t.$set(s)},i(e){if(o)return;transition_in(t.$$.fragment,e),o=!0},o(e){transition_out(t.$$.fragment,e),o=!1},d(e){destroy_component(t,e),e&&detach(s),e&&detach(n)}}}function create_fragment(e){let s,i,t,o,r,n,a;return n=new ButtonWrapper({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){s=element("link"),i=space(),t=element("form"),o=element("div"),r=space(),create_component(n.$$.fragment),this.h()},l(e){const c=query_selector_all('[data-svelte="svelte-1xta96n"]',document.head);s=claim_element(c,"LINK",{rel:!0,href:!0}),c.forEach(detach),i=claim_space(e),t=claim_element(e,"FORM",{class:!0});var a=children(t);o=claim_element(a,"DIV",{class:!0}),children(o).forEach(detach),r=claim_space(a),claim_component(n.$$.fragment,a),a.forEach(detach),this.h()},h(){attr(s,"rel","stylesheet"),attr(s,"href","https://unpkg.com/codemirror@5.65.1/lib/codemirror.css"),attr(o,"class","editor-container svelte-1kxexd2"),attr(t,"class","svelte-1kxexd2")},m(c,l){append(document.head,s),insert(c,i,l),insert(c,t,l),append(t,o),e[3](o),append(t,r),mount_component(n,t,null),a=!0},p(e,[t]){const s={};t&33&&(s.$$scope={dirty:t,ctx:e}),n.$set(s)},i(e){if(a)return;transition_in(n.$$.fragment,e),a=!0},o(e){transition_out(n.$$.fragment,e),a=!1},d(o){detach(s),o&&detach(i),o&&detach(t),e[3](null),destroy_component(n)}}}function instance(e,t,n){let{content:o}=t;const a=Promise.resolve().then(()=>import("https://unpkg.com/codemirror@5.65.1/lib/codemirror.js")).then(()=>import("https://unpkg.com/codemirror@5.65.1/mode/javascript/javascript.js"));let i,s;onMount(async()=>{await a,n(2,s=new CodeMirror(i,{mode:"javascript"})),s.on("change",()=>{try{n(0,o.fields=JSON.parse(s.getValue()),o)}catch(e){if(!(e instanceof SyntaxError))throw e}})});function r(e){binding_callbacks[e?"unshift":"push"](()=>{i=e,n(1,i)})}return e.$$set=e=>{"content"in e&&n(0,o=e.content)},e.$$.update=()=>{if(e.$$.dirty&5)$:if(s&&!s.hasFocus()){s.setValue(JSON.stringify(o.fields,void 0,4))}},[o,i,s,r]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{content:0})}}export default Component