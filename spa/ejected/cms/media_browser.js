import{SvelteComponent,add_flush_callback,append,attr,bind,binding_callbacks,check_outros,children,claim_component,claim_element,claim_space,claim_text,create_component,destroy_component,detach,element,empty,group_outros,init,insert,listen,mount_component,run_all,safe_not_equal,space,text,transition_in,transition_out}from"../../web_modules/svelte/internal/index.mjs";import MediaFilters from"./media_filters.js";import MediaGrid from"./media_grid.js";import ButtonWrapper from"./button_wrapper.js";import Button from"./button.js";function create_if_block(e){let t,n;return t=new ButtonWrapper({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,s){mount_component(t,e,s),n=!0},p(e,n){const s={};n&524416&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){if(n)return;transition_in(t.$$.fragment,e),n=!0},o(e){transition_out(t.$$.fragment,e),n=!1},d(e){destroy_component(t,e)}}}function create_default_slot(e){let s,a,o,n,t,r,i,c,l;function u(t){e[18](t)}let d={buttonText:"Delete Selected Media",action:"delete",encoding:"text"};return e[7]!==void 0&&(d.commitList=e[7]),t=new Button({props:d}),binding_callbacks.push(()=>bind(t,"commitList",u)),{c(){s=element("button"),a=text("Download selected"),o=space(),n=element("div"),create_component(t.$$.fragment),this.h()},l(e){s=claim_element(e,"BUTTON",{});var i,r=children(s);a=claim_text(r,"Download selected"),r.forEach(detach),o=claim_space(e),n=claim_element(e,"DIV",{class:!0}),i=children(n),claim_component(t.$$.fragment,i),i.forEach(detach),this.h()},h(){attr(n,"class","delete-wrapper button-secondary")},m(r,d){insert(r,s,d),append(s,a),insert(r,o,d),insert(r,n,d),mount_component(t,n,null),i=!0,c||(l=[listen(s,"click",e[8]),listen(n,"click",e[9])],c=!0)},p(e,n){const s={};!r&&n&128&&(r=!0,s.commitList=e[7],add_flush_callback(()=>r=!1)),t.$set(s)},i(e){if(i)return;transition_in(t.$$.fragment,e),i=!0},o(e){transition_out(t.$$.fragment,e),i=!1},d(e){e&&detach(s),e&&detach(o),e&&detach(n),destroy_component(t),c=!1,run_all(l)}}}function create_fragment(e){let o,n,f,u,b,g,p,m,s,d,v,h,c,a,r;function E(t){e[10](t)}function C(t){e[11](t)}function _(t){e[12](t)}function j(t){e[13](t)}function y(t){e[14](t)}let i={};e[0]!==void 0&&(i.assets=e[0]),e[4]!==void 0&&(i.filters=e[4]),e[5]!==void 0&&(i.enabledFilters=e[5]),e[6]!==void 0&&(i.filteredAssets=e[6]),e[1]!==void 0&&(i.changingAsset=e[1]),n=new MediaFilters({props:i}),binding_callbacks.push(()=>bind(n,"assets",E)),binding_callbacks.push(()=>bind(n,"filters",C)),binding_callbacks.push(()=>bind(n,"enabledFilters",_)),binding_callbacks.push(()=>bind(n,"filteredAssets",j)),binding_callbacks.push(()=>bind(n,"changingAsset",y));function w(t){e[15](t)}function O(t){e[16](t)}function x(t){e[17](t)}let l={files:e[6]};e[3]!==void 0&&(l.selectedMedia=e[3]),e[1]!==void 0&&(l.changingAsset=e[1]),e[2]!==void 0&&(l.showMedia=e[2]),s=new MediaGrid({props:l}),binding_callbacks.push(()=>bind(s,"selectedMedia",w)),binding_callbacks.push(()=>bind(s,"changingAsset",O)),binding_callbacks.push(()=>bind(s,"showMedia",x));let t=e[3].length>0&&create_if_block(e);return{c(){o=element("div"),create_component(n.$$.fragment),m=space(),create_component(s.$$.fragment),c=space(),t&&t.c(),a=empty(),this.h()},l(e){o=claim_element(e,"DIV",{class:!0});var i=children(o);claim_component(n.$$.fragment,i),m=claim_space(i),claim_component(s.$$.fragment,i),i.forEach(detach),c=claim_space(e),t&&t.l(e),a=empty(),this.h()},h(){attr(o,"class","media-wrapper svelte-1tdkqce")},m(e,i){insert(e,o,i),mount_component(n,o,null),append(o,m),mount_component(s,o,null),insert(e,c,i),t&&t.m(e,i),insert(e,a,i),r=!0},p(e,[o]){const i={};!f&&o&1&&(f=!0,i.assets=e[0],add_flush_callback(()=>f=!1)),!u&&o&16&&(u=!0,i.filters=e[4],add_flush_callback(()=>u=!1)),!b&&o&32&&(b=!0,i.enabledFilters=e[5],add_flush_callback(()=>b=!1)),!g&&o&64&&(g=!0,i.filteredAssets=e[6],add_flush_callback(()=>g=!1)),!p&&o&2&&(p=!0,i.changingAsset=e[1],add_flush_callback(()=>p=!1)),n.$set(i);const r={};o&64&&(r.files=e[6]),!d&&o&8&&(d=!0,r.selectedMedia=e[3],add_flush_callback(()=>d=!1)),!v&&o&2&&(v=!0,r.changingAsset=e[1],add_flush_callback(()=>v=!1)),!h&&o&4&&(h=!0,r.showMedia=e[2],add_flush_callback(()=>h=!1)),s.$set(r),e[3].length>0?t?(t.p(e,o),o&8&&transition_in(t,1)):(t=create_if_block(e),t.c(),transition_in(t,1),t.m(a.parentNode,a)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(e){if(r)return;transition_in(n.$$.fragment,e),transition_in(s.$$.fragment,e),transition_in(t),r=!0},o(e){transition_out(n.$$.fragment,e),transition_out(s.$$.fragment,e),transition_out(t),r=!1},d(e){e&&detach(o),destroy_component(n),destroy_component(s),e&&detach(c),t&&t.d(e),e&&detach(a)}}}function instance(e,t,n){let a,c,{assets:o}=t,{changingAsset:i}=t,{showMedia:r}=t,l=[],d=[],s=[];const h=()=>{s.forEach(e=>{const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",e.substring(e.lastIndexOf("/")+1)),t.click()})},u=()=>{s.forEach(e=>{n(0,o=o.filter(t=>t!=e))}),n(3,s=[])};function m(e){o=e,n(0,o)}function f(e){l=e,n(4,l)}function p(e){d=e,n(5,d)}function g(e){a=e,n(6,a)}function v(e){i=e,n(1,i)}function b(e){s=e,n(3,s)}function j(e){i=e,n(1,i)}function y(e){r=e,n(2,r)}function _(e){c=e,(n(7,c),n(3,s))}e.$$set=e=>{"assets"in e&&n(0,o=e.assets),"changingAsset"in e&&n(1,i=e.changingAsset),"showMedia"in e&&n(2,r=e.showMedia)},e.$$.update=()=>{if(e.$$.dirty&8)$:n(7,c=s.map(e=>({file:e,contents:null})))};$:n(6,a=[]);return[o,i,r,s,l,d,a,c,h,u,m,f,p,g,v,b,j,y,_]}class Component extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{assets:0,changingAsset:1,showMedia:2})}}export default Component